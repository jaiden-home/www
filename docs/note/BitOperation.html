<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>二进制原理（Bit Operation） | Jaiden</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/hero.jpg">
    <link rel="apple-touch-icon" href="/icons/apple-touch-icon-152x152.png">
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#3eaf7c">
    <meta name="description" content="程序员 web前端开发">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/assets/css/0.styles.770e0af4.css" as="style"><link rel="preload" href="/assets/js/app.c701c129.js" as="script"><link rel="preload" href="/assets/js/3.971ef2e2.js" as="script"><link rel="preload" href="/assets/js/10.c9b12449.js" as="script"><link rel="preload" href="/assets/js/6.65976e91.js" as="script"><link rel="prefetch" href="/assets/js/11.53e19bee.js"><link rel="prefetch" href="/assets/js/12.d3b0fb20.js"><link rel="prefetch" href="/assets/js/13.078d396c.js"><link rel="prefetch" href="/assets/js/14.da8670fd.js"><link rel="prefetch" href="/assets/js/15.1fa4bd3b.js"><link rel="prefetch" href="/assets/js/16.2561506c.js"><link rel="prefetch" href="/assets/js/17.8cd15550.js"><link rel="prefetch" href="/assets/js/18.4a1ff80e.js"><link rel="prefetch" href="/assets/js/19.f40c463a.js"><link rel="prefetch" href="/assets/js/4.fe52a896.js"><link rel="prefetch" href="/assets/js/5.ff20dc41.js"><link rel="prefetch" href="/assets/js/7.2cd398db.js"><link rel="prefetch" href="/assets/js/8.08153b9d.js"><link rel="prefetch" href="/assets/js/9.f8310c1e.js"><link rel="prefetch" href="/assets/js/vendors~flowchart.cb4119d8.js">
    <link rel="stylesheet" href="/assets/css/0.styles.770e0af4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Jaiden</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/note/" class="nav-link router-link-active">
  笔记
</a></div><div class="nav-item"><a href="https://www.jaiden.cn/VideoCourse.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  课堂视频
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/courseware/" class="nav-link">
  课件
</a></div><div class="nav-item"><a href="/resources/" class="nav-link">
  学习资源
</a></div> <a href="https://github.com/jaiden-home/www" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/note/" class="nav-link router-link-active">
  笔记
</a></div><div class="nav-item"><a href="https://www.jaiden.cn/VideoCourse.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  课堂视频
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/courseware/" class="nav-link">
  课件
</a></div><div class="nav-item"><a href="/resources/" class="nav-link">
  学习资源
</a></div> <a href="https://github.com/jaiden-home/www" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>指南</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/note/" aria-current="page" class="sidebar-link">指南</a></li><li><a href="/note/TypeScript.html" class="sidebar-link">TypeScript</a></li><li><a href="/note/Interpreter.html" class="sidebar-link">解析器(Interpreter)</a></li><li><a href="/note/EventLoop.html" class="sidebar-link">事件循环（Event Loop）</a></li><li><a href="/note/BitOperation.html" aria-current="page" class="active sidebar-link">二进制原理（Bit Operation）</a></li><li><a href="/note/OOP.html" class="sidebar-link">面向对象（oop）</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="二进制原理-bit-operation"><a href="#二进制原理-bit-operation" class="header-anchor">#</a> 二进制原理（Bit Operation）</h1> <div class="language- extra-class"><pre class="language-text"><code>位运算 原码、反码、补码
</code></pre></div><h6 id="写在前面"><a href="#写在前面" class="header-anchor">#</a> 写在前面</h6> <p>本文会以教学问答的形式写出，这里先说明，这里的学生不是读者，而是我自己，我觉得学习带着问题学习是一个比较好的学习方法，而以这种教学问答的形式写作，能比较好的展示学习中的疑问。本文如有错误还请不吝赐教，万分感激。</p> <h6 id="预备知识"><a href="#预备知识" class="header-anchor">#</a> 预备知识：</h6> <h5 id="什么是机器码位"><a href="#什么是机器码位" class="header-anchor">#</a> 什么是机器码位？</h5> <p>我们买东西的时候，商品上有条形码，这个条形码有13条，这个就是13码位，在比如15在二进制表示为 <code>1111</code> 是4个1，那就是4码位。我们一般说的电脑32位，64位，就是这个意思。可以简单理解为：<strong>一个数据的长度就是它的机器码位。</strong></p> <h5 id="机器数与真值"><a href="#机器数与真值" class="header-anchor">#</a> 机器数与真值</h5> <p><strong>机器数</strong>: 顾名思义，就是在机器中表示一个数，例如2的4机器码位就是 0010 。</p> <p><strong>真值</strong>: 就是机器码对应的真正的数值，2在二进制中是10，那么 0010 机器数的真值就是：10 。</p> <p>PS：将一个真值表示成二进制字串的机器数的过程就称为编码。</p> <h5 id="原码-反码-补码"><a href="#原码-反码-补码" class="header-anchor">#</a> 原码，反码，补码</h5> <div class="language-js extra-class"><pre class="language-js"><code><span class="token literal-property property">原码</span><span class="token operator">:</span> 是最简单的机器数表示法。用最高位表示符号位<span class="token punctuation">,</span><span class="token number">1</span>表示负号<span class="token punctuation">,</span><span class="token number">0</span>表示正号。其他位存放该数的二进制的绝对值。
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token literal-property property">反码</span><span class="token operator">:</span> 正数的反码还是等于原码<span class="token punctuation">,</span>负数的反码就是他的原码除符号位外，按位取反。
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token literal-property property">补码</span><span class="token operator">:</span> 正数的补码等于它的原码<span class="token punctuation">,</span>负数的补码就是它的 反码 <span class="token operator">+</span> <span class="token number">1</span> 。
</code></pre></div><p>PS：机器的运算都是以补码的方式进行的，下面是4位码的对照表。</p> <table><thead><tr><th>真值</th> <th>原码</th> <th>反码</th> <th>补码</th></tr></thead> <tbody><tr><td>7</td> <td>0111</td> <td>0111</td> <td>0111</td></tr> <tr><td>6</td> <td>0110</td> <td>0110</td> <td>0110</td></tr> <tr><td>5</td> <td>0101</td> <td>0101</td> <td>0101</td></tr> <tr><td>4</td> <td>0100</td> <td>0100</td> <td>0100</td></tr> <tr><td>3</td> <td>0011</td> <td>0011</td> <td>0011</td></tr> <tr><td>2</td> <td>0010</td> <td>0010</td> <td>0010</td></tr> <tr><td>1</td> <td>0001</td> <td>0001</td> <td>0001</td></tr> <tr><td>0</td> <td>0000</td> <td>0000</td> <td>0000</td></tr> <tr><td>-1</td> <td>1001</td> <td>1110</td> <td>1111</td></tr> <tr><td>-2</td> <td>1010</td> <td>1101</td> <td>1110</td></tr> <tr><td>-3</td> <td>1011</td> <td>1100</td> <td>1101</td></tr> <tr><td>-4</td> <td>1100</td> <td>1011</td> <td>1100</td></tr> <tr><td>-5</td> <td>1101</td> <td>1010</td> <td>1011</td></tr> <tr><td>-6</td> <td>1110</td> <td>1001</td> <td>1010</td></tr> <tr><td>-7</td> <td>1111</td> <td>1000</td> <td>1001</td></tr></tbody></table> <p>有了这张表是不是一下眼前一亮，原来是这么一回事呀，嗯，是的就是这么简单，但是还是有点懵逼，不知道为什么？想知其所以然，其实我觉得学到这里已经是可以了，不要往下学了，因为不知道原理也丝毫不影响你写代码的能力，知道也不会提升你一点写代码的能力，有时间多玩一会，他不爽吗？什么不行！不知道睡不着？好吧，那么我们开始讲一些没有用的。</p> <h5 id="为什么用补码进行运算"><a href="#为什么用补码进行运算" class="header-anchor">#</a> 为什么用补码进行运算？</h5> <p>书接上文我们说了，机器的运算都是以补码的方式进行的，那为什么要用补码？还有为什么还要搞一个反码？不能直接就用原码计算吗？</p> <p>行！你的问题有点多，慢慢解答，要搞清楚为什么有这么多码，就先了解一下什么是，计算机，一台经典计算机体系结构框架是由运算器，控制器，存储器，输入和输出设备组成。其中运算器，只有加法运算器。是的，计算机底层是很弱的。计算机也不认识2，计算机的世界里，只有 0 和 1，不仅仅如此，计算机也没有减法运算器。所有的减法是用加法模拟出来的。说一段题外话，计算机的底层就像单细胞生物，简单而且低弱，随着进化，现在这个星球已经没有比他们还厉害的东西了。</p> <p>好，在说回正题，怎么用加法模拟减法？我们先做一道数学题，放心不难。</p> <p>问题是：1+（?）= 0</p> <p>答案是：1+（-1）=  0</p> <p>嗯，很完美，也很简单，想让两个数相加和为0，只要加上他的相反数就可以了,现在我们用4位数机器码也就是原码，把上题重新做一遍。</p> <p>答案是：0001 + 1001 = 1010</p> <p>是的，错了，答案不是 0，而是 -2 。(你可以去上表上找一下，原码的1010，对应的真值)。这也就是回答你为什么不能用原码直接计算了。为什么会错了呢？错误原因很明显，【0001 +】 是不会错的，错的是1001，他并不是0001的相反数，答案能对就是奇了怪了。错误原因知道了，现在只要找到 0001 相反数就可以了。那开始找吧。</p> <h5 id="相反数"><a href="#相反数" class="header-anchor">#</a> 相反数</h5> <p>相反数特性：若 a + b = 0，则a、b互为相反数。那就是说  0001 + (?) = 0000 ，这个可有点小麻烦，一个正整数相反数肯定是一个负整数，上面我们表上找一圈都没有找到符合我们要求的数，但是我们发现一个这样一个规律，那就是 ：</p> <p>0001 + 1111 = 10000 ，</p> <p>0010 + 1110 = 10000，</p> <p>0011 + 1101 = 10000，</p> <p>...</p> <p>我们之前说过，这是4位机器码，但是结果是10000 是 5位数了，会怎么样呢，那么最高位会丢失。（可以这样理解，其实计算机会另外储存。）丢失之后就变成这样：</p> <p>0001 + 1111 = 0000 ，</p> <p>0010 + 1110 = 0000，</p> <p>0011 + 1101 = 0000，</p> <p>...</p> <p>完美，终于找到了，0001 的相反数 可以设为 1111 但是这个 1111 怎么求得呢？</p> <p>对其实很简单，就拿4位是机器码为例，其最大值就 1111，最大数在加1，就是 10000，它是五位数，也就是我们刚刚说的可以理解为 0000 ，即: 10000 - 0001 = 1111。好了，到这里我们终于找到 0001 的相反数了。它就是 (最大数 - 原码) + 1。到此我们可以推到出以下公式： 原码码 + (最大数 - 原码) + 1 = 0000。</p> <p>好了，我们可以总结为：</p> <p>(最大数 - 原码) 就是 原码的反码。即： (最大数 - 原码)  = 反码。</p> <p>反码 + 1 就是 原码的补码 。即： (最大数 - 原码)  + 1 = 反码 + 1 = 补码。</p> <p>接着我来回答你刚开始的问题，</p> <p>问：什么要用补码？</p> <p>答：因为要用加法模拟减法，所以就有了 减去一个数 等于 加上 这个数的相反数，相反数也就是它的补码。</p> <p>问：那什么还有个反码？</p> <p>答：补码 等于 反码 + 1 所以有了 反码。</p> <p>问：.....</p> <p>等一下，我不是回答完你的问题了吗？怎么你还要问？你的问题怎么那么多？你叫十万个为什么吗？</p> <p>不问睡不着！</p> <p>你可真是太多事睡不着了，好吧，那你就问一个吧。</p> <p>问：为什么 (最大数 - 原码)  就等于 反码 ？还有为什么 反码 + 1 就 等于 补码 ？最大数怎么来的？接着还有10000</p> <p>为什么可以代表 0000？10000 要是代表了 0000 那你让 0000 怎么想，0000 不要面子的吗。</p> <p>答：你这是一个问题吗？你要是没个句号，我还以为你在背十万个为什么呢！</p> <h5 id="模-同余"><a href="#模-同余" class="header-anchor">#</a> 模(同余)</h5> <p>要想回答你的问题，我们必须知道一个概念，那就是：模(同余)，那我们先看一下官方文档的解释：同余式是数论的基本概念之一，设m是给定的一个正整数，a、b是整数，若满足m|(a-b)，则称a与b对模m同余。你要是看懂了，我是佩服你的，你要没有看懂，那就是我故意的。我再来举一个10进制的例子：如果 (7-4) / 3 等于1，那么 7/3 的余 和 4/3的余 是相等的。即：7/3 的余 = 4/3的余。要想理解模(同余)的概念看一下我画的下面这张图。</p> <p><img src="/assets/img/clock.49ab4b0b.png" alt="clock"></p> <p>从上图可以看出，画的真丑。好了，那不是重点。重点是：这是一个时钟图，尽管被我改造的和你见的时钟不大一样，但是也不影响它是一个时钟。这个时钟图就可以看成一个12进制的模，现在是1点，我想到2点的位置，只要顺时针走一点就可以，还有别的方式吗？当然还可以逆时针走11点。所以11点和1点对模。</p> <p>好了通过以上我们的例子，不难理解，原码码与补码对模关系，如下图：</p> <p><img src="/assets/img/clock-code.d0bff50a.png" alt="clock-code"></p> <p>是的，正如你发现的000与100是对模关系，但是不要慌，问题不大。还记得我们上面说的吗？在原码的定义中用最高位表示符号位。以上图举个例子，3位机器码中，最大正整数是3，即 011。所以永远不会用到100这个来做补码，只需要不理会就可以了。在想想一个问题，3位机器码是几个数呢？对8个，那他的最大值是 111，对应的真值7（十进制）,所以就是：真值 + 1 才是它的对模数。好了，我们来回答一下刚刚那些问题。</p> <p>问：为什么 (最大数 - 原码)  就等于 反码 ？</p> <p>答：反码其实就是原码补数，100为和，30的补数就是70。最大数为和，即：反码 = 最大数 - 原码。</p> <p>问：最大数怎么来的？</p> <p>答：最大数就是机器码的最大真值数，3位机器码中，最大真值数，是111就是7（十进制）。</p> <p>问：还有为什么 反码 + 1 就 等于 补码 ？</p> <p>答：刚说过了最大数为和，反码其实就是原码补数，可是最大数的真值数并不是对模数，真值数+1才是对模数。以3位码举例子：因为3位机器码是从000开始到111结束，有8个数，而111的机器码的真值数是7，所以 最大数 + 1 就等于对模数。</p> <p>问：10000为什么可以代表 0000？10000 要是代表了 0000 那你让 0000 怎么想，0000 不要面子的吗？</p> <p>答：0000 要不要面子我不知道，但是用同余式表示：1111 + 1 就是0000 ，因为 10000 与 0000同余。</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/jaiden-home/www/edit/master/blog/note/BitOperation.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2/8/2023, 6:28:45 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/note/EventLoop.html" class="prev">
        事件循环（Event Loop）
      </a></span> <span class="next"><a href="/note/OOP.html">
        面向对象（oop）
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.c701c129.js" defer></script><script src="/assets/js/3.971ef2e2.js" defer></script><script src="/assets/js/10.c9b12449.js" defer></script><script src="/assets/js/6.65976e91.js" defer></script>
  </body>
</html>
