<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>TypeScript | Jaiden</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/hero.jpg">
    <link rel="apple-touch-icon" href="/icons/apple-touch-icon-152x152.png">
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#3eaf7c">
    <meta name="description" content="程序员 web前端开发">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/assets/css/0.styles.770e0af4.css" as="style"><link rel="preload" href="/assets/js/app.c701c129.js" as="script"><link rel="preload" href="/assets/js/3.971ef2e2.js" as="script"><link rel="preload" href="/assets/js/17.8cd15550.js" as="script"><link rel="preload" href="/assets/js/6.65976e91.js" as="script"><link rel="prefetch" href="/assets/js/10.c9b12449.js"><link rel="prefetch" href="/assets/js/11.53e19bee.js"><link rel="prefetch" href="/assets/js/12.d3b0fb20.js"><link rel="prefetch" href="/assets/js/13.078d396c.js"><link rel="prefetch" href="/assets/js/14.da8670fd.js"><link rel="prefetch" href="/assets/js/15.1fa4bd3b.js"><link rel="prefetch" href="/assets/js/16.2561506c.js"><link rel="prefetch" href="/assets/js/18.4a1ff80e.js"><link rel="prefetch" href="/assets/js/19.f40c463a.js"><link rel="prefetch" href="/assets/js/4.fe52a896.js"><link rel="prefetch" href="/assets/js/5.ff20dc41.js"><link rel="prefetch" href="/assets/js/7.2cd398db.js"><link rel="prefetch" href="/assets/js/8.08153b9d.js"><link rel="prefetch" href="/assets/js/9.f8310c1e.js"><link rel="prefetch" href="/assets/js/vendors~flowchart.cb4119d8.js">
    <link rel="stylesheet" href="/assets/css/0.styles.770e0af4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Jaiden</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/note/" class="nav-link router-link-active">
  笔记
</a></div><div class="nav-item"><a href="https://www.jaiden.cn/VideoCourse.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  课堂视频
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/courseware/" class="nav-link">
  课件
</a></div><div class="nav-item"><a href="/resources/" class="nav-link">
  学习资源
</a></div> <a href="https://github.com/jaiden-home/www" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/note/" class="nav-link router-link-active">
  笔记
</a></div><div class="nav-item"><a href="https://www.jaiden.cn/VideoCourse.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  课堂视频
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/courseware/" class="nav-link">
  课件
</a></div><div class="nav-item"><a href="/resources/" class="nav-link">
  学习资源
</a></div> <a href="https://github.com/jaiden-home/www" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>指南</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/note/" aria-current="page" class="sidebar-link">指南</a></li><li><a href="/note/TypeScript.html" aria-current="page" class="active sidebar-link">TypeScript</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/note/Interpreter.html" class="sidebar-link">解析器(Interpreter)</a></li><li><a href="/note/EventLoop.html" class="sidebar-link">事件循环（Event Loop）</a></li><li><a href="/note/BitOperation.html" class="sidebar-link">二进制原理（Bit Operation）</a></li><li><a href="/note/OOP.html" class="sidebar-link">面向对象（oop）</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="typescript"><a href="#typescript" class="header-anchor">#</a> TypeScript</h1> <h3 id="什么是-typescript"><a href="#什么是-typescript" class="header-anchor">#</a> 什么是 TypeScript？</h3> <h4 id="官方定义"><a href="#官方定义" class="header-anchor">#</a> 官方定义</h4> <blockquote><p>TypeScript is JavaScript with syntax for types.
TypeScript是一种基于JavaScript的强类型编程语言，可以在任何规模上为您提供更好的工具。</p></blockquote> <p>以上描述是官网[<a href="https://www.typescriptlang.org" target="_blank" rel="noopener noreferrer">1]<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>对于 TypeScript 的定义。</p> <h4 id="鸭子泛型"><a href="#鸭子泛型" class="header-anchor">#</a> 鸭子泛型</h4> <p>​	“鸭子泛型” 在TypeScript 是一个类型的概念。鸭子泛型它源自于一个编程原则，即“如果它看起来像鸭子，游起来像鸭子，叫起来像鸭子，那么它可能就是一只鸭子”。在编程中，这个原则指的是我们不关心对象的类是什么，而只关心对象是否具有我们需要的属性或方法。也就是说在TypeScript中，类型关心的是数据之间的关系(相同,多少,结构)。不关心它派生与那个实际的类。</p> <h4 id="优缺点"><a href="#优缺点" class="header-anchor">#</a> 优缺点</h4> <ul><li>优点：提高了代码的健壮性，增强提示使得编码更安全高效，使得编码更有约束力。</li> <li>缺点：额外的类型声明，降低了代码可读性，增加了维护成本，提高了心智负担。</li></ul> <p>​	所有我们知道，TypeScript 只在你的编辑器里有效。它给你更早发现bug的能力，这方面和你的eslint类似；很显然 TypeScript 并不是适合任何JavaScript的项目。在考虑是否使用TypeScript 时，要考虑<code>健壮性</code>和<code>安全约束</code>是不是首选项；我们建议你回答项目三个问题，来判断是不是要使用TypeScript。</p> <blockquote><ul><li><p>你的项目是不是基类项目，被多个项目共享，例如：工具库等？</p> <ul><li>TypeScript 更适合公共项目。</li></ul></li> <li><p>你的项目迭代进度是不是主线任务？</p> <ul><li>TypeScript 会降低开发速度。</li></ul></li> <li><p>效率 和 可控性 二选一你更关心哪一个？</p> <ul><li>TypeScript 增强代码的: 可用性、健壮性、安全性；</li> <li>TypeScript 降低代码的: 可读性，维护性?、开发效率；</li></ul></li></ul></blockquote> <p>​	TypeScript 本意就是为了更好的维护性，但是由于往往项目开发人员，大量的使用不规范，不合理，使得项目维护性更差。当代码语言的某项能力依赖于人，而不是代码。我觉得造成的结果是代码带来的。所以不要盲目的给你项目中使用TypeScript ，使得你的项目使用了AnyScript 编写完成。</p> <h3 id="类型总结"><a href="#类型总结" class="header-anchor">#</a> 类型总结</h3> <p>我们来回顾一下，JavaScript中有哪些数据类型；</p> <p><strong>原有基础类型</strong></p> <ul><li>boolean</li> <li>string</li> <li>number</li> <li>symbol</li> <li>bigInt</li> <li>undefined</li> <li>null</li></ul> <p><strong>类型新增源始类型</strong></p> <ul><li><p>any</p> <blockquote><p>任意类型：它允许对数据进行任何类型操作， 放弃了TypeScript 提供的类型检查。更适合叫它：没有类型。</p></blockquote></li> <li><p>unknown</p> <blockquote><p>未知类型：它派生于any，是更安全的替代 <code>any</code> 的类型。要求是TypeScript 任意类型的一种。更适合叫它：任意类型。</p></blockquote></li> <li><p>never</p> <blockquote><p>不存在类型：类似与javascript里的undefined的定义；不存在的值，根本不会有的值。</p></blockquote></li> <li><p>void</p> <blockquote><p>不关心类型：表示没有任何操作，不关心后续内容。通常用作那些没有返回值的函数的返回类型。</p></blockquote></li></ul> <p><strong>数据描述类型</strong></p> <ul><li><p>对象</p> <blockquote><ul><li><p><strong>Object</strong> (大写)：<code>Object</code> 是一个全局类型。准确地说它表示所有对象的父类型，包括包装类( Boolean、String、Number、Symbol、BigInt ) 。或者说它表示除了 <code>null</code>、<code>undefined</code>的父类型。</p></li> <li><p><strong>object</strong> (小写)：<code>object</code> 是一个对象类型。表示任何非原始类型的值。包括由 <code>Object</code> 构造函数创建的对象，以及由其他构造函数（如 <code>Array</code>、<code>Function</code> 等）创建的对象。</p></li> <li><p>包装类型：<code>String</code>、<code>Number</code> 、<code>Boolean</code> 是原始包装类型，有对象特性, 通常可以理解成基础类型的子类型。而 <code>string</code>、<code>number</code>、 <code>boolean</code> 是基本数据类型。 通常可以理解成包装类的父类。</p></li></ul></blockquote></li> <li><p>数组</p> <blockquote><p>TypeScript中数组更像集合，每一项的类型，都要满足数组类型的定义。通常可以理解成每一项的类型是数组类型的子类。</p></blockquote></li> <li><p>函数</p> <blockquote><p>在 TypeScript 中，函数类型是一种用来定义函数的类型的方式。它允许你为函数的参数和返回值指定类型，以确保代码的类型安全性。</p> <ul><li><p>函数类型：你可以为函数的参数和返回值指定类型。函数类型任然是一个javascript的函数，只是增强了，参数 ，返回值类型检查。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 箭头函数</span>
<span class="token keyword">const</span> add <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x <span class="token operator">+</span> y
<span class="token punctuation">}</span>
                                            
<span class="token comment">// 表达式箭头函数</span>
<span class="token keyword">const</span> <span class="token function-variable function">sub</span><span class="token operator">:</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function-variable function">number</span> <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x <span class="token operator">-</span> y
<span class="token punctuation">}</span>
                                            
<span class="token comment">// 声明函数</span>
<span class="token keyword">function</span> <span class="token function">mult</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x <span class="token operator">*</span> y
<span class="token punctuation">}</span>
</code></pre></div><ul><li>类型函数：你可以指定一个函数类型为一个类型，可以叫它类型函数。它是TypeScript一个类型，这个类型的结构是函数。</li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code> <span class="token keyword">type</span> <span class="token class-name">MathFunction</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span>
                        
<span class="token keyword">const</span> subtract<span class="token operator">:</span> <span class="token function-variable function">MathFunction</span> <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> x <span class="token operator">/</span> y<span class="token punctuation">;</span>
</code></pre></div></li></ul></blockquote></li> <li><p>class类</p> <blockquote><p>​	class类在 JavaScript 中特性，在TypeScript 中都存在，并且用法相似。但在 TypeScript 中，它有一些额外的类型检查和语法支持。</p> <p>如用 abstract 来声明抽象类；用 <code>private</code>、<code>protected</code> 类型标识符；当类中存在类型标识符，则该类就不依赖鸭子泛型继承，没有兼容性。</p> <p>还可以使用修饰符  <code>public</code>、<code>private</code>、<code>protected</code>、<code>redadonly</code> 来控制成员的访问权限。例如：</p> <ul><li><p>private 私有的，只有我可以访问，也是<code>类型标识符</code>；</p></li> <li><p>protected 受保护的，我的属性，我的子类 可以访问，也是<code>类型标识符</code>；</p></li> <li><p>public 公开的，我的属性，我的子类，或者实例都可以访问，默认声明；</p></li> <li><p>redadonly 修饰成只读；</p></li></ul> <p>还有类的装饰器（Decorators）是TypeScript中的一个实验性特性，它允许你通过在类声明的前面添加一个特殊的表达式来“装饰”类。装饰器可以用来修改类的行为，或者为类添加额外的功能，而不需要更改类的原始代码。装饰器的概念类似于Java中的注解（Annotations），但它们在TypeScript中是一等公民，可以用于执行更复杂的操作。</p></blockquote></li></ul> <p><strong>描述数据类型</strong></p> <ul><li><p>元组</p> <blockquote><p>元组（Tuple）是一种特殊的数组类型，它允许你定义一个固定长度和固定类型的数组。元组可以包含不同类型的元素，但元素的数量和类型在声明时需要保持一致。元组中的元素是固定的，一旦声明就不能更改数量或类型。但是可以通过索引来更新元素的值。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">const</span> tuple<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">boolean</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div></blockquote></li> <li><p>枚举</p> <blockquote><p>枚举（Enum）是一种用来定义命名常量集合的数据类型。用于标识一组相关的常量，提高代码的可读性和可维护性，使用枚举成员替代硬编码的常量值，使得代码更易于理解和修改。</p> <ul><li>使用 <code>enum</code> 关键字来定义枚举类型。</li> <li>枚举中的每个成员都有一个与之关联的数字值，默认从 <code>0</code> 开始，依次递增。</li> <li>除了数字枚举外，可以为枚举成员指定具体的值，还可以使用字符串枚举。在枚举类型中，枚举值到枚举名的映射是双向的。</li></ul></blockquote></li> <li><p>联合类型</p> <blockquote><p>联合类型是一种用于表示一个类型，可以具有多种不同类型的方式。通过使用 <code>|</code> 符号将多个类型连接在一起，形成一个联合类型。通常可以理解成<code>并集</code>。</p></blockquote></li> <li><p>交叉类型</p> <blockquote><p>交叉类型是一种用于组合多个类型的方式，它产生的结果类型将包含所有输入类型的成员。换句话说，如果你有多个类型，并且希望将它们合并为一个类型，可以使用交叉类型。通常可以理解成<code>交集</code>。当交叉类型是复杂类型时：这里的交集结果就是子集，符合: 多个集合(每项复杂类型)的共有集(子类型)。</p></blockquote></li> <li><p>interface接口</p> <blockquote><p>接口是一种用来定义对象的结构或类的形状的类型。接口可以包含属性和方法的声明，但不提供具体的实现。接口在开发中常用于描述对象的形状，以及类应该具有哪些属性和方法。</p></blockquote></li></ul> <p><strong>泛型数据类型</strong></p> <ul><li><p>泛型</p> <blockquote><p>泛型是 TypeScript 中的一种特性，它允许我们在定义函数、类或接口时使用参数化类型。通过使用泛型，我们可以在定义时不指定具体的类型，而是在使用时动态地指定类型。</p></blockquote></li></ul> <h3 id="语法-操作符与操作词"><a href="#语法-操作符与操作词" class="header-anchor">#</a> 语法(操作符与操作词)</h3> <h4 id="type-声明类型操作词"><a href="#type-声明类型操作词" class="header-anchor">#</a> type (声明类型操作词)</h4> <p>可以使用 <code>type</code> 关键字来声明类型别名，用来给一个类型起一个新的名字。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Age</span> <span class="token operator">=</span> <span class="token builtin">number</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> age<span class="token operator">:</span> Age <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出：30</span>
</code></pre></div><h4 id="泛型标记符"><a href="#泛型标记符" class="header-anchor">#</a> &lt;&gt; 泛型标记符</h4> <p>泛型是一种提供类型复用的技术，可以通过尖括号 &lt;&gt; 包含一个或多个类型参数。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span>  <span class="token class-name">genericType<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span>  <span class="token constant">T</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> variant<span class="token operator">:</span> genericType<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token string">'str'</span>
</code></pre></div><h4 id="可选操作符"><a href="#可选操作符" class="header-anchor">#</a> ? 可选操作符</h4> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 表示greet是可选的</span>
<span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  greet<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> person<span class="token operator">:</span> Person <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">&quot;Bob&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// javascript 安全地调用可选方法：可选链</span>
person<span class="token punctuation">.</span>greet<span class="token operator">?.</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 这个是javascript用法，要和typescript区分</span>
</code></pre></div><h4 id="extends-约束关键字-条件类型"><a href="#extends-约束关键字-条件类型" class="header-anchor">#</a> extends 约束关键字(条件类型)</h4> <p><code>extends</code> 在条件类型中作为关键字使用，用于约束一个依赖于类型符合某个条件的新类型。条件类型是一种高级类型：它不是像javascript的中<code>extends</code> 关键字 一样，定义建立继承关系。而是在进行类型推断或定义复杂类型条件约束。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 1） 'str' 是否能扩展  string ，能返回新类型 true ，不能返回新类型 false</span>
<span class="token keyword">type</span> <span class="token class-name">IsString</span> <span class="token operator">=</span> <span class="token string">'str'</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">string</span></span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// IsString = true</span>


<span class="token comment">// 2）泛型 T 被联合类型要求; number | undefined 约束,T 必须符合联合类型要求;</span>
<span class="token keyword">type</span> <span class="token class-name">SafeDivide<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">number</span></span> <span class="token operator">?</span> <span class="token constant">T</span> <span class="token operator">:</span> <span class="token builtin">never</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">isSafeDivide</span> <span class="token operator">=</span> SafeDivide<span class="token operator">&lt;</span><span class="token keyword">null</span><span class="token operator">&gt;</span> <span class="token comment">// 类型“null”不满足约束“number | undefined”</span>
</code></pre></div><h4 id="typeof-运算符"><a href="#typeof-运算符" class="header-anchor">#</a> typeof 运算符</h4> <p>在 JavaScript 中，<code>typeof</code> 用于在表达式上下文中获取一个值的类型，它返回一个表示类型的字符串。</p> <p>在TypeScript中，限制了 <code>typeof</code> 运算符的使用范围，它只能在标识符或其属性上使用。 扩展了 <code>typeof</code> 的用法，允许在类型上下文中引用变量或属性的类型。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">//  1) 类型上下文的 typeof</span>
<span class="token keyword">let</span> s <span class="token operator">=</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> n<span class="token operator">:</span> <span class="token keyword">typeof</span> s<span class="token punctuation">;</span> <span class="token comment">// n 的类型被推断为 string</span>


<span class="token comment">// 2) typeof 可以与 ReturnType 预定义类型结合使用，ReturnType&lt;T&gt; 接受一个函数类型，并产生该函数的返回类型。</span>
<span class="token keyword">type</span> <span class="token class-name">Predicate</span> <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">K</span></span> <span class="token operator">=</span> ReturnType<span class="token operator">&lt;</span>Predicate<span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// K 的类型被推断为 boolean</span>

<span class="token comment">// 3) 引用函数的类型</span>
<span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">P</span></span> <span class="token operator">=</span> ReturnType<span class="token operator">&lt;</span><span class="token keyword">typeof</span> f<span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// P 的类型被推断为 { x: number; y: number; }                    </span>
</code></pre></div><h4 id="keyof-运算符"><a href="#keyof-运算符" class="header-anchor">#</a> keyof 运算符</h4> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 1) 基本用法</span>
<span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">PersonKeys</span> <span class="token operator">=</span> <span class="token keyword">keyof</span> Person<span class="token punctuation">;</span>  <span class="token comment">// &quot;name&quot; | &quot;age&quot;</span>

<span class="token comment">// 2) 获取对象 key 键类型</span>
<span class="token keyword">type</span> <span class="token class-name">KeyType</span> <span class="token operator">=</span> <span class="token keyword">keyof</span> <span class="token builtin">any</span><span class="token punctuation">;</span> <span class="token comment">// string | number | symbol</span>
</code></pre></div><h4 id="in-循环运算符"><a href="#in-循环运算符" class="header-anchor">#</a> in 循环运算符</h4> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 1) 取出接口的每个类型</span>
<span class="token keyword">type</span> <span class="token class-name">Compute<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">:</span><span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
</code></pre></div><h4 id="移除属性操作符"><a href="#移除属性操作符" class="header-anchor">#</a> - 移除属性操作符</h4> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 定义一个泛型，去掉属性中有的只读属性</span>
<span class="token keyword">type</span> <span class="token class-name">Required<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">-</span><span class="token operator">?</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
    id<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    name<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name">ProductInput</span> <span class="token operator">=</span> Required<span class="token operator">&lt;</span>Product<span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="as-关键字-类型断言"><a href="#as-关键字-类型断言" class="header-anchor">#</a> as 关键字(类型断言)</h4> <p>类型断言是一种在编译时告诉 TypeScript 编译器“我确信这是真的”的方式，来覆盖编译器的类型推断。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 1) 断言变量的确切类型：当你知道一个变量的具体类型比编译器推断的类型更具体时，可以使用类型断言来指定一个更确切的类型。</span>
<span class="token keyword">let</span> content<span class="token operator">:</span> <span class="token builtin">any</span> <span class="token operator">=</span> <span class="token string">&quot;It's text, I promise!&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> text<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> content <span class="token keyword">as</span> <span class="token builtin">string</span><span class="token punctuation">;</span>


<span class="token comment">// 2) 在联合类型中断言更具体的类型：当处理联合类型时，如果需要将变量当作联合类型中的一个更具体的类型来使用，可以使用类型断言。</span>
<span class="token keyword">function</span> <span class="token function">getStringValue</span><span class="token punctuation">(</span>arg<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> arg <span class="token keyword">as</span> <span class="token builtin">string</span><span class="token punctuation">;</span> <span class="token comment">// 断言 arg 是 string 类型</span>
<span class="token punctuation">}</span>


<span class="token comment">// 3) 断言对象的特定属性：当需要访问一个对象的属性，而这个属性可能不存在时，可以使用类型断言来确保属性的存在。</span>
<span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  age<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> person<span class="token operator">:</span> Person <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;Alice&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> age<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> person<span class="token punctuation">.</span>age <span class="token keyword">as</span> <span class="token builtin">number</span><span class="token punctuation">;</span> <span class="token comment">// 断言 age 属性存在并是 number 类型</span>


<span class="token comment">// 4) 循环断言：通过值查出键 </span>
<span class="token keyword">type</span> <span class="token class-name">PickKeyByValue<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> object<span class="token punctuation">,</span> <span class="token constant">V</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token constant">K</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span> <span class="token keyword">as</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">K</span><span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">V</span></span> <span class="token operator">?</span> <span class="token constant">K</span> <span class="token operator">:</span> <span class="token builtin">never</span> <span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">K</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
    id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    price<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">ProductInput</span> <span class="token operator">=</span> PickKeyByValue<span class="token operator">&lt;</span>Product<span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="is-关键字-类型守卫"><a href="#is-关键字-类型守卫" class="header-anchor">#</a> is 关键字(类型守卫)</h4> <p><code>is</code> 是一个用来缩小类型的类型谓词。它通常与自定义类型守卫函数一起使用，以确保在特定的代码块中变量具有更具体的类型。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">isString</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token operator">:</span> value <span class="token keyword">is</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">typeof</span> value <span class="token operator">===</span> <span class="token string">'string'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> myValue<span class="token operator">!</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isString</span><span class="token punctuation">(</span>myValue<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>myValue<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//  myValue: string</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="非空断言操作符"><a href="#非空断言操作符" class="header-anchor">#</a> ! 非空断言操作符</h4> <p>非空断言操作符。当你使用非空断言操作符时，告诉 TypeScript 你确信某个变量不会是 <code>null</code> 或 <code>undefined</code>。这个操作符可以用于类型断言，以覆盖 TypeScript 的严格空值检查。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 1) 断言变量不为 null 或 undefined</span>
<span class="token keyword">let</span> value<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> definitelyString<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> value<span class="token operator">!</span><span class="token punctuation">;</span> <span class="token comment">// 断言 value 不为 null 或 undefined</span>

<span class="token comment">// 2) 断言一定能获取到document节点，不为null</span>
<span class="token keyword">const</span> element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'ID'</span><span class="token punctuation">)</span><span class="token operator">!</span><span class="token punctuation">;</span><span class="token comment">// tS不能确定类型，使用非空断言,确定不会有null</span>
element<span class="token operator">?.</span>innerHTML <span class="token operator">=</span> <span class="token string">'Hello, TypeScript!'</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="infer-类型推断"><a href="#infer-类型推断" class="header-anchor">#</a> infer 类型推断</h4> <ul><li><strong>简单类型推断</strong></li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 推断返回值</span>
<span class="token keyword">type</span> <span class="token class-name">ExtractReturnType<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">infer</span> <span class="token constant">R</span> <span class="token operator">?</span> <span class="token constant">R</span> <span class="token operator">:</span> <span class="token builtin">never</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><strong>条件类型的递归</strong></li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 取递归Promise的返回值</span>
<span class="token keyword">type</span> <span class="token class-name">PromiseResult<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span>  <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">infer</span> <span class="token constant">R</span><span class="token operator">&gt;</span></span> <span class="token operator">?</span> PromiseResult <span class="token operator">&lt;</span><span class="token constant">R</span><span class="token operator">&gt;</span> <span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name">PromiseValueResult</span> <span class="token operator">=</span> PromiseResult<span class="token operator">&lt;</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">null</span><span class="token operator">&gt;</span> <span class="token operator">&gt;</span> <span class="token operator">&gt;</span> <span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// null</span>
</code></pre></div><h4 id="模板字符串"><a href="#模板字符串" class="header-anchor">#</a> `${}` 模板字符串</h4> <p>TypeScript 提供了字符串模板的泛型方法有四个</p> <ul><li>Uppercase 全部大写</li> <li>Lowercase 全部小写</li> <li>Capitalize 首字母大写</li> <li>Uncapitalize 首字母小写</li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Greeting</span> <span class="token punctuation">{</span>
    <span class="token string-property property">'title name'</span><span class="token operator">:</span> <span class="token string">'hello world'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 保留空格前面字符串并全部大写</span>
<span class="token keyword">type</span> <span class="token class-name">UppercaseFirstTemplateLiteralUnion<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span> <span class="token operator">|</span> bigint <span class="token operator">|</span> <span class="token builtin">boolean</span> <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">K</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token builtin">any</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">?</span> Uppercase<span class="token operator">&lt;</span><span class="token constant">K</span><span class="token operator">&gt;</span> <span class="token operator">:</span> <span class="token string">'never'</span><span class="token punctuation">;</span>

<span class="token comment">// 字符串的泛型方法</span>
<span class="token keyword">type</span> <span class="token class-name">UppercaseGreeting</span> <span class="token operator">=</span> Uppercase<span class="token operator">&lt;</span>Greeting<span class="token punctuation">[</span><span class="token string">'title name'</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// &quot;HELLO WORLD&quot;</span>
<span class="token keyword">type</span> <span class="token class-name">LowercaseGreeting</span> <span class="token operator">=</span> Lowercase<span class="token operator">&lt;</span>Greeting<span class="token punctuation">[</span><span class="token string">'title name'</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// &quot;hello world&quot;</span>
<span class="token keyword">type</span> <span class="token class-name">CapitalizedGreeting</span> <span class="token operator">=</span> Capitalize<span class="token operator">&lt;</span>Greeting<span class="token punctuation">[</span><span class="token string">'title name'</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// &quot;Hello world&quot;</span>
<span class="token keyword">type</span> <span class="token class-name">UncapitalizedGreeting</span> <span class="token operator">=</span> Uncapitalize<span class="token operator">&lt;</span><span class="token string">'Hello World'</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// &quot;hello World&quot;</span>


<span class="token keyword">type</span> <span class="token class-name">Example</span> <span class="token operator">=</span> UppercaseFirstTemplateLiteralUnion<span class="token operator">&lt;</span>Greeting<span class="token punctuation">[</span><span class="token string">'title name'</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>  <span class="token comment">// &quot;Hello&quot;</span>

<span class="token comment">// 改写对象key名：将key 保留空格前面字符串并全部大写</span>
<span class="token keyword">type</span> <span class="token class-name">RenameGreeting<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token constant">K</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span> <span class="token keyword">as</span> UppercaseFirstTemplateLiteralUnion<span class="token operator">&lt;</span><span class="token constant">K</span> <span class="token operator">&amp;</span> <span class="token builtin">string</span><span class="token operator">&gt;</span><span class="token punctuation">]</span><span class="token operator">:</span> Uppercase<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">K</span><span class="token punctuation">]</span> <span class="token operator">&amp;</span> <span class="token builtin">string</span><span class="token operator">&gt;</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">ResultRenameGreeting</span> <span class="token operator">=</span> RenameGreeting<span class="token operator">&lt;</span>Greeting<span class="token operator">&gt;</span>
<span class="token comment">// 输出： type ResultRenameGreeting = {</span>
<span class="token comment">//          TITLE: &quot;HELLO WORLD&quot;;</span>
<span class="token comment">//        }</span>
</code></pre></div><h3 id="数据增强描述类型"><a href="#数据增强描述类型" class="header-anchor">#</a> 数据增强描述类型</h3> <h4 id="复杂类型"><a href="#复杂类型" class="header-anchor">#</a> 复杂类型</h4> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Point</span> <span class="token operator">=</span> <span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> y<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> point<span class="token operator">:</span> Point <span class="token operator">=</span> <span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token string">'str'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>point<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出：{ x: 10, y: 'str' }</span>
</code></pre></div><h4 id="数组类型"><a href="#数组类型" class="header-anchor">#</a> 数组类型</h4> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// javascript中定义的数组</span>
<span class="token keyword">const</span> array<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'符合javascript定义的数组'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'名字'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">88</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">]</span> 

<span class="token comment">// 数字数组</span>
<span class="token keyword">const</span> numbers<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// 字符串数组</span>
<span class="token keyword">const</span> strings<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;apple&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;banana&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;orange&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// 布尔值数组</span>
<span class="token keyword">const</span> booleans<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="函数类型"><a href="#函数类型" class="header-anchor">#</a> 函数类型</h4> <h5 id="函数类型-2"><a href="#函数类型-2" class="header-anchor">#</a> 函数类型</h5> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 1) 箭头函数</span>
<span class="token keyword">const</span> add <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x <span class="token operator">+</span> y
<span class="token punctuation">}</span>

<span class="token comment">// 2) 表达式：使用类型别名</span>
<span class="token keyword">type</span> <span class="token class-name">MathFunction</span> <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> sub<span class="token operator">:</span> <span class="token function-variable function">MathFunction</span> <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x <span class="token operator">-</span> y
<span class="token punctuation">}</span>

<span class="token comment">// 3) 声明函数</span>
<span class="token keyword">function</span> <span class="token function">mult</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x <span class="token operator">*</span> y
<span class="token punctuation">}</span>

<span class="token comment">// 4) 可选参数</span>
<span class="token keyword">type</span> <span class="token class-name">ReturnValue</span> <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> reslut<span class="token operator">:</span> <span class="token function-variable function">ReturnValue</span> <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x 
<span class="token punctuation">}</span>

<span class="token comment">// 5) 剩余参数</span>
<span class="token keyword">type</span> <span class="token class-name">SurplusFunction</span> <span class="token operator">=</span> <span class="token punctuation">(</span>arg1<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token operator">...</span>rest<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> surplusToArray<span class="token operator">:</span> <span class="token function-variable function">SurplusFunction</span> <span class="token operator">=</span> <span class="token punctuation">(</span>str<span class="token punctuation">,</span> n1<span class="token punctuation">,</span> n2<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span>n1<span class="token punctuation">,</span> n2<span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token comment">// 6) this 参数,在定义函数类型时，指定this的类型，这在处理对象的方法时非常有用。</span>
<span class="token keyword">interface</span> <span class="token class-name">MyObject</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    <span class="token function-variable function">introduce</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token operator">:</span> MyObject<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> person<span class="token operator">:</span> MyObject <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">&quot;Alice&quot;</span><span class="token punctuation">,</span>
    <span class="token function-variable function">introduce</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hello, my name is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> fn <span class="token operator">=</span> person<span class="token punctuation">.</span>introduce<span class="token punctuation">;</span> <span class="token comment">//改变this</span>
<span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 使用 introduce 方法 报错</span>
<span class="token comment">// The 'this' context of type 'void' is not assignable to method's 'this' of type 'MyObject'.</span>
</code></pre></div><h5 id="类型函数"><a href="#类型函数" class="header-anchor">#</a> 类型函数</h5> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 接口式：类型函数</span>
<span class="token keyword">interface</span>  <span class="token class-name">MathFunction</span> <span class="token punctuation">{</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span>

<span class="token keyword">const</span> subtract<span class="token operator">:</span> <span class="token function-variable function">MathFunction</span> <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> x <span class="token operator">/</span> y<span class="token punctuation">;</span>
</code></pre></div><h5 id="构造函数类型"><a href="#构造函数类型" class="header-anchor">#</a> 构造函数类型</h5> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 用于定义构造函数的类型，所有class的类型。</span>
<span class="token keyword">type</span> <span class="token class-name">ConstructorFunction</span> <span class="token operator">=</span>  <span class="token keyword">new</span> <span class="token punctuation">(</span><span class="token operator">...</span>anys<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="函数重载"><a href="#函数重载" class="header-anchor">#</a> 函数重载</h5> <p>函数重载是指在 TypeScript 中为同一个函数有：多个参数，对应这多种输出结果；提供同名类型定义的重载能力；通过函数重载，可以为同一个函数提供多个签名（即参数类型和返回类型），以覆盖不同的调用情况；</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 函数重载</span>
<span class="token keyword">function</span> <span class="token function">getValue</span> <span class="token punctuation">(</span>v<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">getValue</span> <span class="token punctuation">(</span>v<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">getValue</span> <span class="token punctuation">(</span>value<span class="token operator">:</span><span class="token builtin">any</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> value
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">getType</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token comment">// 报错，因为重载中没有出现boolean类型</span>
</code></pre></div><h5 id="泛型函数"><a href="#泛型函数" class="header-anchor">#</a> 泛型函数</h5> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 1) 是个函数,支持了泛型</span>
<span class="token keyword">type</span> <span class="token class-name">FunctionGenerics</span> <span class="token operator">=</span> <span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>array<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">T</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> identity<span class="token operator">:</span> <span class="token function-variable function">FunctionGenerics</span> <span class="token operator">=</span> <span class="token punctuation">(</span>arg<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> arg<span class="token punctuation">;</span>

<span class="token keyword">let</span> output <span class="token operator">=</span> <span class="token generic-function"><span class="token function">identity</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">'str'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">// 2) 声明式</span>
<span class="token keyword">function</span> <span class="token generic-function"><span class="token function">identityFunction</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>arg<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> arg<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> outputNumber <span class="token operator">=</span> <span class="token generic-function"><span class="token function">identityFunction</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="函数泛型"><a href="#函数泛型" class="header-anchor">#</a> 函数泛型</h5> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 是个函数类型，参数等类型来自于泛型传入</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">F</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">(</span>arg<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">T</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> printLog<span class="token operator">:</span> <span class="token constant">F</span><span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">(</span>num<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> num
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> valueType <span class="token operator">=</span> <span class="token function">printLog</span><span class="token punctuation">(</span><span class="token number">88</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// const valueType: number</span>
</code></pre></div><h4 id="class类的类型"><a href="#class类的类型" class="header-anchor">#</a> class类的类型</h4> <h5 id="类的类型"><a href="#类的类型" class="header-anchor">#</a> 类的类型</h5> <p>类的类型本身是内置的，通过 typeof 获取。本身class的类型，是类实例的类型, 就是<code>构造函数类型</code>；</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">MyClass</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">ClassType</span> <span class="token operator">=</span> <span class="token keyword">typeof</span> MyClass <span class="token comment">// 类的类型，通过 typeof 获取</span>

<span class="token keyword">const</span> c<span class="token operator">:</span> ClassType <span class="token operator">=</span> MyClass<span class="token punctuation">;</span> <span class="token comment">// class类的类型</span>
<span class="token keyword">const</span> m<span class="token operator">:</span> MyClass <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 构造函数类型</span>
</code></pre></div><h5 id="private、protected-类型标识符"><a href="#private、protected-类型标识符" class="header-anchor">#</a> <code>private</code>、<code>protected</code> 类型标识符</h5> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 1) 可以通过检查</span>
<span class="token keyword">class</span> <span class="token class-name">MyName</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> name<span class="token operator">:</span><span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">'我的名字'</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">YourName</span> <span class="token punctuation">{</span>
     <span class="token keyword">public</span> name<span class="token operator">:</span><span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">'你的名字'</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> my<span class="token operator">:</span>MyName <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> your<span class="token operator">:</span>YourName <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

my <span class="token operator">=</span> your <span class="token comment">// 鸭子泛型，可以通过检测</span>


<span class="token comment">// 2) 不可以通过检查</span>
<span class="token keyword">class</span> <span class="token class-name">MyName</span> <span class="token punctuation">{</span> <span class="token comment">// 用 `private`、`protected` 类型标识符；则该类就不依赖鸭子泛型继承，没有兼容性。</span>
    <span class="token keyword">private</span> name<span class="token operator">:</span><span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">'我的名字'</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">YourName</span> <span class="token punctuation">{</span>
     <span class="token keyword">private</span> name<span class="token operator">:</span><span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">'你的名字'</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> my<span class="token operator">:</span>MyName <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> your<span class="token operator">:</span>YourName <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

my <span class="token operator">=</span> your <span class="token comment">// 没有兼容性，不可以通过检测</span>
</code></pre></div><h5 id="类型注解"><a href="#类型注解" class="header-anchor">#</a> 类型注解</h5> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> <span class="token comment">// 需要先声明成员</span>
    age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>

    <span class="token function">constructor</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 类型注解</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h5 id="访问修饰符"><a href="#访问修饰符" class="header-anchor">#</a> 访问修饰符</h5> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> gender<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> <span class="token comment">// 公开的，我的属性，我的子类，或者实例都可以访问。(默认)</span>
    <span class="token keyword">protected</span> age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> <span class="token comment">// 受保护的，我的属性，我的子类 可以访问。</span>
    <span class="token keyword">private</span> name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>  <span class="token comment">// 私有的，只有我可以访问</span>

    <span class="token function">constructor</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span><span class="token comment">/* public */</span>  gender<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 可以直接类型注解 public gender: string;不建议;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>gender <span class="token operator">=</span> gender<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h5 id="readonly-修饰符"><a href="#readonly-修饰符" class="header-anchor">#</a> readonly 修饰符</h5> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Circle</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">readonly</span> <span class="token constant">PI</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">3.14</span><span class="token punctuation">;</span> <span class="token comment">// public不是必须的</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> circle <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Circle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// circle.PI = 3.14159; // 编译错误，无法修改只读属性</span>

</code></pre></div><h5 id="抽象类"><a href="#抽象类" class="header-anchor">#</a> 抽象类</h5> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token keyword">abstract</span> <span class="token function">makeSound</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token function">makeSound</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Dog barks&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h5 id="类实现多接口"><a href="#类实现多接口" class="header-anchor">#</a> 类实现多接口</h5> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Printable</span> <span class="token punctuation">{</span> <span class="token comment">// 接口</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Preview</span> <span class="token punctuation">{</span>
	<span class="token function">preview</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Document</span> <span class="token keyword">implements</span> <span class="token class-name">Printable</span><span class="token punctuation">,</span> Preview <span class="token punctuation">{</span> <span class="token comment">// 多接口继承</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Printing document...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
	<span class="token function">preview</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;In preview...&quot;</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h5 id="实例方法与原型方法"><a href="#实例方法与原型方法" class="header-anchor">#</a> 实例方法与原型方法</h5> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 1) 实例方法</span>
<span class="token keyword">class</span> <span class="token class-name">MessageLogger</span> <span class="token punctuation">{</span>
    <span class="token comment">// 描述性的名称</span>
    <span class="token function-variable function">sayHello</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
    
    <span class="token comment">// &quot;描述性的名称即属性&quot;需要在构造函数中明确赋值 -&gt; sayHello:() =&gt; void;</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">sayHello</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>



<span class="token comment">// 2） 原型方法</span>
<span class="token keyword">class</span> <span class="token class-name">MessageLogger</span> <span class="token punctuation">{</span>
    <span class="token function">logMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span> <span class="token comment">// 描述性的方法名</span>

    <span class="token function">logMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span> <span class="token comment">// logMessage方法的实现</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">MessageLogger</span> <span class="token punctuation">{</span> <span class="token comment">// 实例方法，不能用原型方法实现</span>
    <span class="token function-variable function">sayHello</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span> <span class="token comment">// // 描述性的名称</span>
    
	<span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 编译错误：没有初始值设定，并且在构造函数中没有明确赋值。</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h5 id="类的装饰器"><a href="#类的装饰器" class="header-anchor">#</a> 类的装饰器</h5> <ul><li>要启用装饰器支持，你需要在<code>tsconfig.json</code>文件中设置<code>experimentalDecorators</code>选项为 true;(ps: 装饰器是实验性特性，可能会在未来的TypeScript版本中更改或移除)</li> <li>装饰器的执行顺序如下：
<ul><li>参数装饰器</li> <li>方法装饰器</li> <li>属性装饰器</li> <li>类装饰器</li></ul></li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 1) 参数装饰器：用于修改构造函数参数的行为。</span>
<span class="token keyword">function</span> <span class="token function">logParam</span><span class="token punctuation">(</span>target<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> propertyName<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> index<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Parameter name: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>propertyName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, index: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>index<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">MyClass</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token decorator"><span class="token at operator">@</span><span class="token function">logParam</span></span> <span class="token string">&quot;param1&quot;</span><span class="token punctuation">,</span> <span class="token decorator"><span class="token at operator">@</span><span class="token function">logParam</span></span> <span class="token string">&quot;param2&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token comment">// 2) 方法装饰器：用于修改方法的行为。</span>
<span class="token keyword">function</span> <span class="token function">logMethod</span><span class="token punctuation">(</span>target<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> propertyName<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> descriptor<span class="token operator">:</span> PropertyDescriptor<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> method <span class="token operator">=</span> descriptor<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
    descriptor<span class="token punctuation">.</span><span class="token function-variable function">value</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Calling </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>propertyName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">method</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> descriptor<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">MyClass</span> <span class="token punctuation">{</span>
    <span class="token decorator"><span class="token at operator">@</span><span class="token function">logMethod</span></span>
    <span class="token function">myMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>



<span class="token comment">// 3) 属性装饰器：用于修改属性的行为。</span>
<span class="token keyword">function</span> <span class="token function">configurable</span><span class="token punctuation">(</span>target<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> propertyName<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 修改属性描述符</span>
    <span class="token keyword">let</span> value <span class="token operator">=</span> target<span class="token punctuation">[</span>propertyName<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token function-variable function">getter</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> value<span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token function-variable function">setter</span> <span class="token operator">=</span> <span class="token punctuation">(</span>val<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> value <span class="token operator">=</span> val<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token function">getter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function">set</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">setter</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">MyClass</span> <span class="token punctuation">{</span>
    <span class="token decorator"><span class="token at operator">@</span><span class="token function">configurable</span></span>
    myProperty<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>




<span class="token comment">// 4) 类装饰器: 基础用法</span>
<span class="token keyword">function</span> <span class="token generic-function"><span class="token function">classDecorator</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">{</span> <span class="token keyword">new</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>constructor<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">class</span> <span class="token class-name"><span class="token keyword">extends</span></span> constructor <span class="token punctuation">{</span>
        <span class="token keyword">public</span> newProperty<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">'newProperty'</span><span class="token punctuation">;</span> <span class="token comment">// 装饰添加额外的属性或方法</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token decorator"><span class="token at operator">@</span><span class="token function">classDecorator</span></span>
<span class="token keyword">class</span> <span class="token class-name">MyClass</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>


</code></pre></div><h3 id="描述数据格式类型"><a href="#描述数据格式类型" class="header-anchor">#</a> 描述数据格式类型</h3> <h4 id="interface-接口的类型"><a href="#interface-接口的类型" class="header-anchor">#</a> interface 接口的类型</h4> <p>在 TypeScript 中，<code>interface</code> 是一种用于描述对象的形状（即属性和方法）的语法结构。它可以用来定义对象的类型，使得 TypeScript 能够对对象的结构进行类型检查。</p> <h5 id="定义函数类型"><a href="#定义函数类型" class="header-anchor">#</a> 定义函数类型</h5> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Greeter</span> <span class="token punctuation">{</span>
    <span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> sayHello<span class="token operator">:</span> <span class="token function-variable function">Greeter</span> <span class="token operator">=</span> <span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hello, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token string">&quot;Alice&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出：Hello, Alice!</span>

</code></pre></div><h5 id="混合类型"><a href="#混合类型" class="header-anchor">#</a> 混合类型</h5> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Counter</span> <span class="token punctuation">{</span>
    count<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    <span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">createCounter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Counter <span class="token punctuation">{</span>
    <span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> counter<span class="token operator">:</span> Counter <span class="token operator">=</span> <span class="token punctuation">{</span>
        count<span class="token punctuation">,</span>
        <span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            count<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> counter<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> myCounter <span class="token operator">=</span> <span class="token function">createCounter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myCounter<span class="token punctuation">.</span><span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>myCounter<span class="token punctuation">.</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出：1</span>

</code></pre></div><h5 id="定义对象的形状"><a href="#定义对象的形状" class="header-anchor">#</a> 定义对象的形状</h5> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> person<span class="token operator">:</span> Person <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">&quot;Alice&quot;</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">30</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre></div><h5 id="可选属性"><a href="#可选属性" class="header-anchor">#</a> 可选属性</h5> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Config</span> <span class="token punctuation">{</span>
    title<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    description<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> <span class="token comment">// 可选属性</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> config1<span class="token operator">:</span> Config <span class="token operator">=</span> <span class="token punctuation">{</span> title<span class="token operator">:</span> <span class="token string">&quot;Title&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// description 属性是可选的</span>
<span class="token keyword">const</span> config2<span class="token operator">:</span> Config <span class="token operator">=</span> <span class="token punctuation">{</span> title<span class="token operator">:</span> <span class="token string">&quot;Title&quot;</span><span class="token punctuation">,</span> description<span class="token operator">:</span> <span class="token string">&quot;Description&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// description 属性是可选的</span>

</code></pre></div><h5 id="只读属性"><a href="#只读属性" class="header-anchor">#</a> 只读属性</h5> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Point</span> <span class="token punctuation">{</span>
    <span class="token keyword">readonly</span> x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    <span class="token keyword">readonly</span> y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> point<span class="token operator">:</span> Point <span class="token operator">=</span> <span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token number">20</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// point.x = 5; // 错误，只读属性不能被修改</span>
</code></pre></div><h5 id="接口间的互相继承"><a href="#接口间的互相继承" class="header-anchor">#</a> 接口间的互相继承</h5> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Dog</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    breed<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> dog<span class="token operator">:</span> Dog <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;Buddy&quot;</span><span class="token punctuation">,</span> breed<span class="token operator">:</span> <span class="token string">&quot;Labrador&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre></div><h5 id="接口合并"><a href="#接口合并" class="header-anchor">#</a> 接口合并</h5> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 因此如果你定义了两个具有相同名称的接口，它们会自动合并成一个接口。</span>
<span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> person<span class="token operator">:</span> Person <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">&quot;Alice&quot;</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">30</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出：Alice</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出：30</span>

</code></pre></div><h5 id="可索引类型-数组"><a href="#可索引类型-数组" class="header-anchor">#</a> 可索引类型(数组)</h5> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">StringArray</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span>index<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> myArray<span class="token operator">:</span> StringArray <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;Alice&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Bob&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>myArray<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出：Alice</span>

</code></pre></div><h4 id="tuple-元组类型"><a href="#tuple-元组类型" class="header-anchor">#</a> tuple 元组类型</h4> <ul><li>一种特殊的数组类型，一个固定长度和固定类型的数组。</li> <li>可以通过索引来访问原则成员。</li> <li>可以解构元组, 扩展元组，单不能访问扩展内容。</li> <li>元组可以包含不同类型的元素，但元素的数量和类型在声明时需要保持一致。</li> <li>元组中的元素是固定的，一旦声明就不能更改数量或类型。</li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 1) 定义一个元组</span>
<span class="token keyword">type</span> <span class="token class-name">ProductSummary</span> <span class="token operator">=</span> <span class="token punctuation">[</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> price<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> state<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> phone<span class="token operator">:</span> ProductSummary <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'iphone'</span><span class="token punctuation">,</span> <span class="token number">888</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// 2) 访问元组中的元素</span>
<span class="token keyword">type</span> <span class="token class-name">phoneNameType</span> <span class="token operator">=</span> ProductSummary<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// phoneNameType: string</span>

<span class="token comment">// 3) 可以: 元组解构</span>
<span class="token keyword">type</span> <span class="token class-name">Iphone</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>ProductSummary<span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token punctuation">]</span>

<span class="token comment">// 4) 可以：只能更新类容；</span>
phone <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'华为'</span><span class="token punctuation">,</span> <span class="token number">999</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// 5) 不可以：修改元组的元素类型。</span>
phone <span class="token operator">=</span>  <span class="token punctuation">[</span><span class="token string">'iphone'</span><span class="token punctuation">,</span> <span class="token string">'888'</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 报错: 元组定义后不可以改变元素类型</span>

<span class="token comment">// 6) 不应该扩展，即使扩展也不可以访问扩展的内容；</span>
<span class="token keyword">const</span> iphone <span class="token operator">=</span>  <span class="token punctuation">[</span><span class="token string">'iphone'</span><span class="token punctuation">,</span> <span class="token string">'888'</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token string">'附加信息'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
phone <span class="token operator">=</span> iphone <span class="token keyword">as</span> ProductSummary<span class="token punctuation">;</span>
<span class="token keyword">const</span> price <span class="token operator">=</span>  phone<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>  <span class="token comment">// price: number 类型出错误，不应该修改</span>
<span class="token keyword">const</span> attach <span class="token operator">=</span> phone<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 报错: 元组可以扩展，但是不能获取</span>
</code></pre></div><h4 id="enum-枚举类型"><a href="#enum-枚举类型" class="header-anchor">#</a> enum 枚举类型</h4> <p>在TypeScript中，枚举（Enum）是一种特殊的类型，允许我们为一组值定义有意义的名称。枚举使代码更具可读性和可维护性，特别是在需要处理一组相关常量的情况下。TypeScript支持数字枚举和字符串枚举两种类型。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 1) 数字枚举</span>
<span class="token keyword">enum</span> Direction <span class="token punctuation">{</span>
    Up<span class="token punctuation">,</span>    <span class="token comment">// 默认值为0</span>
    Down<span class="token punctuation">,</span>  <span class="token comment">// 默认值为1</span>
    Left<span class="token punctuation">,</span>  <span class="token comment">// 默认值为2</span>
    Right  <span class="token comment">// 默认值为3</span>
<span class="token punctuation">}</span>


<span class="token comment">// 2) 可以手动指定枚举成员的值</span>
<span class="token keyword">enum</span> Direction <span class="token punctuation">{</span>
    Up <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span>
    Down<span class="token punctuation">,</span>  <span class="token comment">// 3</span>
    Left<span class="token punctuation">,</span>  <span class="token comment">// 4</span>
    Right  <span class="token comment">// 5</span>
<span class="token punctuation">}</span>

<span class="token comment">// 3) 可以为枚举成员赋予字符串值或数字</span>
<span class="token keyword">enum</span> Direction <span class="token punctuation">{</span>
    Up <span class="token operator">=</span> <span class="token string">&quot;UP&quot;</span><span class="token punctuation">,</span>
    Down <span class="token operator">=</span> <span class="token string">&quot;DOWN&quot;</span><span class="token punctuation">,</span>
    Left <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">,</span>
    Right <span class="token comment">// 4</span>
<span class="token punctuation">}</span>

<span class="token comment">// 4) 反向映射</span>
<span class="token keyword">enum</span> Direction <span class="token punctuation">{</span>
    Up<span class="token punctuation">,</span>
    Down<span class="token punctuation">,</span>
    Left<span class="token punctuation">,</span>
    Right
<span class="token punctuation">}</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Direction<span class="token punctuation">.</span>Up<span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token comment">// 输出: 0</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Direction<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token comment">// 输出: Up</span>

<span class="token comment">// 5) 枚举合并</span>
<span class="token keyword">enum</span> Fruit <span class="token punctuation">{</span>
    Apple <span class="token operator">=</span> <span class="token string">&quot;Apple&quot;</span><span class="token punctuation">,</span>
    Banana <span class="token operator">=</span> <span class="token string">&quot;Banana&quot;</span>
<span class="token punctuation">}</span>

<span class="token keyword">enum</span> Fruit <span class="token punctuation">{</span>
    Orange <span class="token operator">=</span> <span class="token string">&quot;Orange&quot;</span><span class="token punctuation">,</span>
    Mango <span class="token operator">=</span> <span class="token string">&quot;Mango&quot;</span>
<span class="token punctuation">}</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Fruit<span class="token punctuation">.</span>Apple<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 输出: Apple</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Fruit<span class="token punctuation">.</span>Orange<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出: Orange</span>
</code></pre></div><h4 id="联合类型"><a href="#联合类型" class="header-anchor">#</a> 联合类型</h4> <p>联合类型是一种允许一个数据可以是几种类型之一的类型。表示一个值可以是几种类型之一。</p> <ul><li>当你使用联合类型时，只有所有联合类型已有的成员才被认为是安全的。</li> <li>联合类型与交叉类型相反，后者是取多个类型的共有部分。</li> <li>通常认为联合类型是一个<code>并集关系</code>。</li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">ButtonType</span> <span class="token operator">=</span>  <span class="token string">'primary'</span> <span class="token operator">|</span> <span class="token string">'dashed'</span> <span class="token operator">|</span> <span class="token string">'link'</span> <span class="token operator">|</span> <span class="token string">'text'</span> <span class="token operator">|</span> <span class="token string">'default'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> button<span class="token operator">:</span>ButtonType <span class="token operator">=</span> <span class="token string">'default'</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="交叉类型"><a href="#交叉类型" class="header-anchor">#</a> 交叉类型</h4> <p>交叉类型用于组合多个类型，多个类型合并为一个类型。表示一个值同时具备多种类型的特质。</p> <ul><li>当你使用交叉类型时，要符合交叉类型中共有的特征才被认为是安全的。</li> <li>联合类型与交叉类型相反，前者是取多个类型其中之一。</li> <li>常认为交叉类型是一个<code>交集关系</code>。</li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 1) 要符合交叉类型中共有的特征</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">AB</span></span> <span class="token operator">=</span> <span class="token string">'A'</span> <span class="token operator">|</span> <span class="token string">'B'</span> <span class="token operator">|</span> <span class="token string">'C'</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">BC</span></span> <span class="token operator">=</span> <span class="token string">'B'</span> <span class="token operator">|</span> <span class="token string">'C'</span> <span class="token operator">|</span> <span class="token string">'D'</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">CD</span></span> <span class="token operator">=</span> <span class="token string">'C'</span> <span class="token operator">|</span> <span class="token string">'D'</span> <span class="token operator">|</span> <span class="token string">'A'</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name">IntersectionType</span>  <span class="token operator">=</span> <span class="token constant">AB</span> <span class="token operator">&amp;</span> <span class="token constant">BC</span> <span class="token operator">&amp;</span> <span class="token constant">CD</span><span class="token punctuation">;</span>  <span class="token comment">// C</span>

<span class="token comment">// 2) 当'集合'成员是复杂类型,要符合交叉类型中共有的特征，推断是子类。</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">B</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span> b<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">C</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span> c<span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">D</span></span> <span class="token operator">=</span> <span class="token constant">A</span> <span class="token operator">&amp;</span> <span class="token constant">B</span> <span class="token operator">&amp;</span> <span class="token constant">C</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> d<span class="token operator">:</span> <span class="token constant">D</span> <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token string">'hello'</span><span class="token punctuation">,</span> c<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre></div><h3 id="泛型"><a href="#泛型" class="header-anchor">#</a> 泛型</h3> <p>在TypeScript中，泛型是一种提供类型复用的技术。它允许你编写可复用的、函数类型、class类型、 接口类型、 等。这些类型可以用于各种类型组合。</p> <h4 id="别名泛型"><a href="#别名泛型" class="header-anchor">#</a> 别名泛型</h4> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 泛型</span>
<span class="token keyword">type</span> <span class="token class-name">Itype<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token operator">=</span> <span class="token builtin">number</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span><span class="token punctuation">;</span>

<span class="token comment">// 使用方式</span>
<span class="token keyword">const</span> numberType<span class="token operator">:</span>Itype <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> stringType<span class="token operator">:</span>Itype<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token string">'str'</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="泛型函数-与-函数泛型-的区别"><a href="#泛型函数-与-函数泛型-的区别" class="header-anchor">#</a> “泛型函数”与“函数泛型”的区别</h4> <ul><li>泛型函数：是一种特殊的泛型，用来定义函数的参数或者返回值。</li> <li>函数泛型：是一个普通别名泛型，将泛型类型传给了一个函数类型；</li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">GenericFunction<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">(</span>item<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> index<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span> <span class="token comment">// 函数泛型</span>

<span class="token keyword">type</span> <span class="token class-name">FunctionGenerics</span> <span class="token operator">=</span> <span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>array<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> callback<span class="token operator">:</span> GenericFunction<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span> <span class="token comment">// 泛型函数 </span>

<span class="token keyword">const</span> forEach<span class="token operator">:</span> <span class="token function-variable function">FunctionGenerics</span> <span class="token operator">=</span> <span class="token punctuation">(</span>array<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> array<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">callback</span><span class="token punctuation">(</span>array<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>item<span class="token punctuation">,</span> index<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> index<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="类泛型"><a href="#类泛型" class="header-anchor">#</a> 类泛型</h4> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Box<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
    value<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">;</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 使用方式</span>
<span class="token keyword">let</span> box <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Box<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span></span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="接口泛型"><a href="#接口泛型" class="header-anchor">#</a> 接口泛型</h4> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Pair<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
    first<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">;</span>
    second<span class="token operator">:</span> <span class="token constant">U</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 使用方式</span>
<span class="token keyword">let</span> pair<span class="token operator">:</span> Pair<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span> first<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> second<span class="token operator">:</span> <span class="token string">&quot;two&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="泛型约束"><a href="#泛型约束" class="header-anchor">#</a> 泛型约束</h4> <ul><li><strong>约束类型</strong></li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">identity</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span> <span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>arg<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> arg<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 使用方式</span>
<span class="token keyword">const</span> outputString <span class="token operator">=</span> <span class="token function">identity</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// const outputString: &quot;hello&quot;</span>
<span class="token keyword">const</span> outputNumber <span class="token operator">=</span> <span class="token function">identity</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//  const outputNumber: 123</span>
<span class="token keyword">const</span> output <span class="token operator">=</span> <span class="token function">identity</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 报错: 约束了只能有 string 或 number，不能有 boolean </span>
</code></pre></div><ul><li><strong>约束属性</strong></li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">getLen</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">{</span>length<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">}</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>value<span class="token operator">:</span><span class="token constant">T</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> value<span class="token punctuation">.</span>length
<span class="token punctuation">}</span>

<span class="token comment">// 使用方式</span>
<span class="token keyword">const</span> arrLenght <span class="token operator">=</span> <span class="token function">getLen</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// const arrLenght: number</span>
</code></pre></div><ul><li><strong>约束多属性</strong></li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">getValue</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> object<span class="token punctuation">,</span> <span class="token constant">U</span> <span class="token keyword">extends</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>obj<span class="token operator">:</span><span class="token constant">T</span><span class="token punctuation">,</span> key<span class="token operator">:</span><span class="token constant">U</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">U</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token comment">// 使用方式</span>
<span class="token keyword">const</span> val <span class="token operator">=</span> <span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>a<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token string">'str'</span><span class="token punctuation">,</span> c<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">)</span> <span class="token comment">// const val: boolean</span>
</code></pre></div><ul><li><strong>条件类型</strong></li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">IsString<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">string</span></span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">IsNumber<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">number</span></span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

<span class="token comment">// 使用示例</span>
<span class="token keyword">type</span> <span class="token class-name">TestString</span> <span class="token operator">=</span> IsString<span class="token operator">&lt;</span><span class="token string">&quot;hello&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// 类型为 true</span>
<span class="token keyword">type</span> <span class="token class-name">TestNumber</span> <span class="token operator">=</span> IsNumber<span class="token operator">&lt;</span><span class="token number">42</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// 类型为 true</span>
<span class="token keyword">type</span> <span class="token class-name">TestBoolean</span> <span class="token operator">=</span> IsString<span class="token operator">&lt;</span><span class="token builtin">boolean</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// 类型为 false</span>
</code></pre></div><h4 id="分发机制"><a href="#分发机制" class="header-anchor">#</a> 分发机制</h4> <ul><li><strong>联合类型分发</strong></li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Fish</span> <span class="token operator">=</span> <span class="token string">'Fish'</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">Bird</span> <span class="token operator">=</span> <span class="token string">'Bird'</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name">Swim</span> <span class="token operator">=</span> <span class="token string">'Swim'</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">Fly</span> <span class="token operator">=</span> <span class="token string">'Fly'</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name">Action<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">Fish</span>
    <span class="token operator">?</span> Swim
    <span class="token operator">:</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">Bird</span>
    <span class="token operator">?</span> Fly
    <span class="token operator">:</span> <span class="token builtin">never</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name">action</span> <span class="token operator">=</span> Action<span class="token operator">&lt;</span><span class="token string">'Bird'</span> <span class="token operator">|</span> <span class="token string">'Fish'</span> <span class="token operator">|</span> <span class="token string">'Cat'</span><span class="token operator">&gt;</span>
</code></pre></div><ul><li><strong>泛型中never的分发</strong></li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">IsNever<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">never</span></span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

<span class="token comment">// never经过泛型就会返回 never</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token keyword">is</span></span> <span class="token operator">=</span> IsNever<span class="token operator">&lt;</span><span class="token builtin">never</span><span class="token operator">&gt;</span> <span class="token comment">// type is = never</span>
</code></pre></div><ul><li><strong>阻止分发机制</strong></li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 阻止分发机制，当类型变换成交叉类型时，则没有分发功能</span>
<span class="token keyword">type</span> <span class="token class-name">NoDistrubte<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token operator">&amp;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name">IsNever<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> NoDistrubte<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">never</span></span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

<span class="token comment">// never经过泛型就会返回 never</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token keyword">is</span></span> <span class="token operator">=</span> IsNever<span class="token operator">&lt;</span><span class="token builtin">never</span><span class="token operator">&gt;</span> <span class="token comment">// type is = true</span>
</code></pre></div><h3 id="类型关系"><a href="#类型关系" class="header-anchor">#</a> 类型关系</h3> <p>回顾一下类型:</p> <table><thead><tr><th style="text-align:left;">源类型</th> <th>any</th> <th>unknown</th> <th>never</th> <th>void</th> <th>undefined</th> <th>null</th> <th>boolean</th> <th>string</th> <th>number</th> <th>symbol</th> <th>bigInt</th></tr></thead> <tbody><tr><td style="text-align:left;">类类型</td> <td>Object</td> <td>object</td> <td>函数</td> <td>Classes</td> <td>构造函数类型</td> <td>...</td> <td>Boolean</td> <td>String</td> <td>Number</td> <td>Symbol</td> <td>BigInt</td></tr> <tr><td style="text-align:left;">描述类型</td> <td>interface</td> <td>tuple</td> <td>enum</td> <td>联合类型</td> <td>交叉类型</td> <td>模块</td> <td>命名空间</td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td style="text-align:left;">泛型</td> <td>Extract</td> <td>Exclude</td> <td>Pick</td> <td>Omit</td> <td>NonNullable</td> <td>Parameters</td> <td>ReturnType</td> <td>Partial</td> <td>Required</td> <td>...</td> <td>...</td></tr></tbody></table> <p><strong>总结:</strong></p> <h4 id="any-类型"><a href="#any-类型" class="header-anchor">#</a> any 类型</h4> <ul><li><p>any 是比较特殊，无法约束。</p></li> <li><p>unknown 派生于 any；</p></li> <li><p>any 可以作为任何类型的父类型；</p></li> <li><p>any 可以作为子类型时，将丧失安全检测；</p></li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 1) any 可以作为任何类型的父类型；</span>
<span class="token keyword">type</span> <span class="token class-name">Subtype</span> <span class="token operator">=</span> <span class="token builtin">any</span><span class="token punctuation">;</span> <span class="token comment">// 任何类型</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T</span></span> <span class="token operator">=</span> Subtype <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">any</span></span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// 都会返回 true</span>


<span class="token comment">// 2）any 可以作为子类型时，将丧失安全检测;</span>
<span class="token keyword">type</span> <span class="token class-name">Parent</span> <span class="token operator">=</span> <span class="token string">'any,unknown除外的任何类型'</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">x</span> <span class="token operator">=</span> <span class="token builtin">any</span> <span class="token keyword">extends</span> <span class="token class-name">Parent</span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// 都会返回 boolean,(除外:any,unknown)</span>
</code></pre></div><h4 id="unknown-类型"><a href="#unknown-类型" class="header-anchor">#</a> unknown 类型</h4> <ul><li><p>派生于 any ，是any的安全型。</p></li> <li><p>unknown 派生于 any，成为小any；</p></li> <li><p>any 可以作为任何类型的父类型，与any 一样；</p></li> <li><p>unknown 不是任何类型的子类型。any、unknown除外；</p></li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 1) unknown 可以作为任何类型的父类型；</span>
<span class="token keyword">type</span> <span class="token class-name">Subtype</span> <span class="token operator">=</span> <span class="token builtin">unknown</span><span class="token punctuation">;</span> <span class="token comment">// 任何类型</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T</span></span> <span class="token operator">=</span> Subtype <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">unknown</span></span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// 都会返回 true</span>


<span class="token comment">// unknown 不是任何类型的子类型,any,unknown除外;</span>
<span class="token keyword">type</span> <span class="token class-name">Parent</span> <span class="token operator">=</span> <span class="token string">'除外:any,unknown都返回false'</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">x</span> <span class="token operator">=</span> <span class="token builtin">unknown</span> <span class="token keyword">extends</span> <span class="token class-name">Parent</span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// 都会返回 false,(除外:unknown、any)</span>
</code></pre></div><h4 id="never-类型"><a href="#never-类型" class="header-anchor">#</a> never 类型</h4> <ul><li>除自身外不是任何类型的父类型；</li> <li>是任何类型的子类型；</li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 1) never不是任何类型的父类型,never除外；</span>
<span class="token keyword">type</span> <span class="token class-name">Subtype</span> <span class="token operator">=</span> <span class="token builtin">unknown</span><span class="token punctuation">;</span> <span class="token comment">// 任何类型</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T</span></span> <span class="token operator">=</span> Subtype <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">never</span></span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// 都会返回 false (除外:never、any)</span>


<span class="token comment">// 2) never 是任何类型的子类型;</span>
<span class="token keyword">type</span> <span class="token class-name">Parent</span> <span class="token operator">=</span> <span class="token string">'任何类型'</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">x</span> <span class="token operator">=</span> <span class="token builtin">never</span> <span class="token keyword">extends</span> <span class="token class-name">Parent</span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// 都会返回 true</span>
</code></pre></div><h4 id="void-类型"><a href="#void-类型" class="header-anchor">#</a> void 类型</h4> <ul><li>undefined 派生于 void ;</li> <li>void 除 undefined 外，不是任何类型的父类型;</li> <li>void 除 any、unknown外，不是任何类型的子类型;</li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 1) void 是 undefined 的父类型，其他它都不是。</span>
<span class="token keyword">type</span> <span class="token class-name">Subtype</span> <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span> 
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T</span></span> <span class="token operator">=</span> Subtype <span class="token keyword">extends</span> <span class="token class-name"><span class="token keyword">void</span></span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span>  <span class="token comment">// 都会返回 false (除外:void、undefined、any)</span>


<span class="token comment">// 2) void 不是任何类型子类，any、unknown、除外</span>
<span class="token keyword">type</span> <span class="token class-name">Parent</span> <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">x</span> <span class="token operator">=</span> <span class="token keyword">void</span> <span class="token keyword">extends</span> <span class="token class-name">Parent</span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// 都会返回 false (除外: void、any、unknown)</span>
</code></pre></div><h4 id="undefined-类型"><a href="#undefined-类型" class="header-anchor">#</a> undefined 类型</h4> <ul><li>undefined 派生于 void ;</li> <li>undefined  是 void 的子类型;</li> <li>undefined 不是任何类型的父类型；</li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 1) undefined 不是任何类型的父类型。</span>
<span class="token keyword">type</span> <span class="token class-name">Subtype</span> <span class="token operator">=</span> <span class="token keyword">void</span><span class="token punctuation">;</span> 
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T</span></span> <span class="token operator">=</span> Subtype <span class="token keyword">extends</span> <span class="token class-name"><span class="token keyword">undefined</span></span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span>  <span class="token comment">// 都会返回 false (除外:undefined、any)</span>


<span class="token comment">// 2) undefined 是 void 的子类型;</span>
<span class="token keyword">type</span> <span class="token class-name">Parent</span> <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">x</span> <span class="token operator">=</span> <span class="token keyword">undefined</span> <span class="token keyword">extends</span> <span class="token class-name">Parent</span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// 都会返回 false (除外:undefined、any、unknown、void)</span>
</code></pre></div><h4 id="null-类型"><a href="#null-类型" class="header-anchor">#</a> null 类型</h4> <ul><li>不是任何类型的父类型;</li> <li>null 除 any、unknown外，不是任何类型的子类型;</li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 1) null 不是任何类型的父类型。</span>
<span class="token keyword">type</span> <span class="token class-name">Subtype</span> <span class="token operator">=</span> <span class="token builtin">unknown</span><span class="token punctuation">;</span> 
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T</span></span> <span class="token operator">=</span> Subtype <span class="token keyword">extends</span> <span class="token class-name"><span class="token keyword">null</span></span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span>  <span class="token comment">// 都会返回 false (除外:null、any)</span>


<span class="token comment">// 2) null 不是 任何类型的子类型，除外:any、unknown;</span>
<span class="token keyword">type</span> <span class="token class-name">Parent</span> <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">x</span> <span class="token operator">=</span> <span class="token keyword">null</span> <span class="token keyword">extends</span> <span class="token class-name">Parent</span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// 都会返回 false (除外:null、any、unknown)</span>
</code></pre></div><h4 id="包装类"><a href="#包装类" class="header-anchor">#</a> 包装类</h4> <ul><li><p>包装类：Boolean  String  Number  Symbol  BigInt</p></li> <li><p>字面量类：boolean  string  number  symbol  bigInt</p></li> <li><p>大写字母开头是包装类，子小写的父类型；</p></li> <li><p>包装类有构造函数。字面量类型没有构造函数；</p></li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 包装类是父类型</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T</span></span> <span class="token operator">=</span> <span class="token builtin">string</span> <span class="token keyword">extends</span> <span class="token class-name">String</span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span>  <span class="token comment">// 返回 true</span>

<span class="token comment">// String - 包装类</span>
<span class="token keyword">const</span> wrapped_string<span class="token operator">:</span> String <span class="token operator">=</span> <span class="token string">&quot;Hello&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> wrappedString<span class="token operator">:</span> String <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">&quot;Hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// string - 字面类</span>
<span class="token keyword">const</span> literal_string<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">&quot;Hello&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> literalString<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">&quot;Hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 报错</span>
<span class="token comment">// Type 'String' is not assignable to type 'string'. 'string' is a primitive, but 'String' is a wrapper object. Prefer using 'string' when possible.</span>

<span class="token comment">//---------------//</span>
<span class="token comment">// Number - 包装类</span>
<span class="token keyword">const</span> wrapped_number<span class="token operator">:</span> Number <span class="token operator">=</span> <span class="token number">88</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> wrappedNumber<span class="token operator">:</span> Number <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Number</span><span class="token punctuation">(</span><span class="token number">88</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// number - 字面类</span>
<span class="token keyword">const</span> literal_number<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">88</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> literalNumber<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Number</span><span class="token punctuation">(</span><span class="token number">88</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 报错</span>
<span class="token comment">// Type 'Number' is not assignable to type 'number'. 'number' is a primitive, but 'Number' is a wrapper object. Prefer using 'number' when possible.</span>

<span class="token comment">//---------------//</span>
<span class="token comment">// Boolean - 包装类</span>
<span class="token keyword">const</span> wrapped_boolean<span class="token operator">:</span> Boolean <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> wrappedBoolean<span class="token operator">:</span> Boolean <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Boolean</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// boolean - 字面类</span>
<span class="token keyword">const</span> literal_boolean<span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> literalBoolean<span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Boolean</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 报错</span>
<span class="token comment">// Type 'Number' is not assignable to type 'number'. 'number' is a primitive, but 'Number' is a wrapper object. Prefer using 'number' when possible.</span>
</code></pre></div><h3 id="兼容性"><a href="#兼容性" class="header-anchor">#</a> 兼容性</h3> <p>​	类型兼容性是 TypeScript 类型系统的核心概念之一，它决定了两个类型是否可以互相替换。在 TypeScript 中，兼容性规则保证了类型安全：采用鸭子类型兼容原则：会根据对象的成员来判断类型的兼容性，而不是基于标记类型。就是说如果两个对象具有相同的属性，那么它们就是兼容的，即使它们的类型声明不同。</p> <ul><li><p><strong>结构兼容性</strong>：两个类型在结构上相似，即它们具有相同的成员，则它们是兼容的。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">let</span> a<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> b<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> a<span class="token punctuation">;</span> <span class="token comment">// 兼容</span>
</code></pre></div></li> <li><p><strong>赋值兼容性</strong>：一个类型可以赋值给另一个类型，如果它们是相同的类型，或者一个类型是另一个类型的子类型。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Base</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">Derived</span> <span class="token keyword">extends</span> <span class="token class-name">Base</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">let</span> base<span class="token operator">:</span> Base <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> derived<span class="token operator">:</span> Derived <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

base <span class="token operator">=</span> derived<span class="token punctuation">;</span> <span class="token comment">// 兼容，子类型 可以满足 父类型</span>
</code></pre></div></li></ul> <h4 id="结构性兼容"><a href="#结构性兼容" class="header-anchor">#</a> 结构性兼容</h4> <p>基于它们的结构，而不是基于它们的显式声明。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Dog</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name">Person</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> teddy<span class="token operator">:</span> Dog <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'泰迪'</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> dahuang<span class="token operator">:</span> Person <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'大黄'</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">// 基于它们的结构,可以赋值: 互相替换</span>
teddy <span class="token operator">=</span> dahuang<span class="token punctuation">;</span>
dahuang <span class="token operator">=</span> teddy<span class="token punctuation">;</span>
</code></pre></div><h4 id="子父类兼容"><a href="#子父类兼容" class="header-anchor">#</a> 子父类兼容</h4> <p>一个类型是另一个类型的子类型时，子类型可以替换父类型。相反父类型不可以替换子类型。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Parent</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token keyword">public</span> address<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>address<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token function">callTitle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>address<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Child</span> <span class="token keyword">extends</span> <span class="token class-name">Parent</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> money<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">100</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Grandson</span> <span class="token keyword">extends</span> <span class="token class-name">Child</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token function">work</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> grandpa<span class="token operator">:</span> Parent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Parent</span><span class="token punctuation">(</span><span class="token string">'爷爷'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> father<span class="token operator">:</span> Child <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Child</span><span class="token punctuation">(</span><span class="token string">'爸爸'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> oneself<span class="token operator">:</span> Grandson <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Grandson</span><span class="token punctuation">(</span><span class="token string">'孙子'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 子可以赋与父</span>
father <span class="token operator">=</span> oneself
<span class="token comment">// 父不可以赋与子</span>
father <span class="token operator">=</span> grandpa <span class="token comment">// ERROR: Property 'money' is missing in type 'Parent' but required in type 'Child'.</span>
</code></pre></div><h4 id="鸭子类型兼容"><a href="#鸭子类型兼容" class="header-anchor">#</a> 鸭子类型兼容</h4> <p>基于它们的结构，而不是基于它们的显式声明。这意味着在<code>结构兼容性</code>基础上有个<code>赋值兼容性</code>规则：</p> <ul><li>逆变：如果两个类型可以替换时，那么可以定义它们的超集或基类型。在定义类型时更宽泛的类型。
<ul><li>逆变主要用于定于函数参数类型，使的我们在定义参数时，更宽泛的类型。</li> <li>总结：对应函数参数来说，我们是定父传子。</li></ul></li> <li>协变：如果两个类型可以替换时，那么可以传递给它们的子集或派生类型。传递数据时更具体的类型。
<ul><li>对应协变来说：我们在传递数据时，可以赋予更加具体类型。</li> <li>总结：传子定父。使我们在传递数据时，更具体的类型。</li></ul></li></ul> <p>逆变与协变区别：</p> <ul><li>相同点：都是为了满足：在定于时更加宽泛，在传递数据时更具体。</li> <li>不同点：逆变强调在定义时更加宽泛，协变强调传递数据时更具体。</li></ul> <h5 id="逆变"><a href="#逆变" class="header-anchor">#</a> 逆变</h5> <p>逆变主要用于函数参数类型：当处理多参数时，允许一个函数接受一个比它声明的参数类型更具体的类型。</p> <ul><li><p>函数逆变: 函数参数类型</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 定义的多</span>
<span class="token keyword">type</span> <span class="token class-name">CallbackType</span> <span class="token operator">=</span> <span class="token punctuation">(</span>first<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> second<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> third<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> fourth<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span>


<span class="token comment">// 使用的少</span>
<span class="token keyword">const</span> callback<span class="token operator">:</span><span class="token function-variable function">CallbackType</span> <span class="token operator">=</span> <span class="token punctuation">(</span>first<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>first<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>接口逆变: 子父类类型</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Dog</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    call<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> animal<span class="token operator">:</span>Animal <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span><span class="token string">'动物'</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> dog<span class="token operator">:</span>Dog <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'狗'</span><span class="token punctuation">,</span>
    call<span class="token operator">:</span> <span class="token string">'叫'</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span>  <span class="token function-variable function">Call</span><span class="token operator">=</span> <span class="token punctuation">(</span>animal<span class="token operator">:</span>Animal<span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">Call</span><span class="token punctuation">(</span>dog<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 逆变：定义的Animal，使用时传入了Dog</span>
</code></pre></div></li> <li><p>逆变过程</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Parent</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> house<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">'房子'</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Child</span> <span class="token keyword">extends</span> <span class="token class-name">Parent</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> money<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">100</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Contravariancy<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">(</span>arg<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>

<span class="token comment">// 逆变了：Parent在前Child在后</span>
<span class="token keyword">type</span> <span class="token class-name">isChild</span> <span class="token operator">=</span> Parent <span class="token keyword">extends</span> <span class="token class-name">Child</span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
<span class="token keyword">type</span> <span class="token class-name">isContravariancy</span> <span class="token operator">=</span> Contravariancy<span class="token operator">&lt;</span>Parent<span class="token operator">&gt;</span> <span class="token keyword">extends</span> <span class="token class-name">Contravariancy<span class="token operator">&lt;</span>Child<span class="token operator">&gt;</span></span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre></div></li> <li><p>泛型逆变</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Breed<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token function-variable function">breed</span><span class="token operator">:</span> <span class="token punctuation">(</span>ins<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span> <span class="token comment">// 由于逆变，无法通过：</span>
    <span class="token comment">// breed(arg: T): void; // 类型函数,本质不是一个真正意义的函数。所以没有，逆变过程</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> name<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">'动物'</span><span class="token punctuation">;</span>
    <span class="token function">breed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> call<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">'汪汪汪'</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Puppy</span> <span class="token keyword">extends</span> <span class="token class-name">Dog</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> shape<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">'小狗'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> canidae<span class="token operator">:</span>Breed<span class="token operator">&lt;</span>Dog<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> teddy<span class="token operator">:</span>Breed<span class="token operator">&lt;</span>Puppy<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Puppy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

canidae <span class="token operator">=</span> teddy 
<span class="token comment">// 等于 (arg: Puppy)=&gt;{}  去赋值  (arg: Dog)=&gt;{}；</span>
<span class="token comment">// 逆变要求Dog是Puppy的子类 </span>
<span class="token comment">// 所以不满足要求: 报错</span>
</code></pre></div></li> <li><p>class逆变与禁止逆变</p> <ul><li><p>逆变</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> name<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">'动物'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> age<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token function-variable function">Call</span> <span class="token operator">=</span> <span class="token punctuation">(</span>animal<span class="token operator">:</span> Animal<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">Call</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 逆变：定义的Animal，使用时传入了Dog</span>
</code></pre></div></li> <li><p>禁止逆变: 同时有 <code>private</code>、<code>protected</code> 相同标识符;当类中存在类型标识符，则该类就不依赖鸭子类型你继承，没有兼容性。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> id<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">'DNA'</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> name<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">'动物'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> id<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">'DNA'</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> age<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token function-variable function">Call</span> <span class="token operator">=</span> <span class="token punctuation">(</span>animal<span class="token operator">:</span> Animal<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">Call</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 报错:同时有 private id 相同标识符,没有兼容性。</span>
</code></pre></div></li></ul></li></ul> <h5 id="协变"><a href="#协变" class="header-anchor">#</a> 协变</h5> <p>协变主要用于，一个类型赋值或推断另一个类型时，那么可以传递给它们的子集或派生类型。</p> <ul><li><p>函数协变: 协变过程</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> name<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">'动物'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> age<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">getAnima</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">getDog</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//  协变了: getAnima 是 getDog 的子类</span>
<span class="token keyword">type</span> <span class="token class-name">isCovariance</span> <span class="token operator">=</span> <span class="token keyword">typeof</span> getDog <span class="token keyword">extends</span> <span class="token class-name"><span class="token keyword">typeof</span></span> getAnima <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre></div></li> <li><p>类型协变: 子父类型</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> name<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">'动物'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> age<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">ReturnAnima</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Animal<span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">getDog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Dog <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 协变允许 getDog 赋值给 ReturnAnima</span>
<span class="token keyword">let</span> animalGetter<span class="token operator">:</span> ReturnAnima <span class="token operator">=</span> getDog<span class="token punctuation">;</span>
</code></pre></div></li> <li><p>接口协变：类型推断。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> jerry<span class="token operator">:</span> Person <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'jerry'</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
    <span class="token comment">// talk: '', // 'talk' does not exist in type 'Person'.</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> jack <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'jack'</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">19</span><span class="token punctuation">,</span>
    talk<span class="token operator">:</span> <span class="token string">'Shut up'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

jerry <span class="token operator">=</span> jack <span class="token comment">//  可以赋值，发生了协变</span>
</code></pre></div></li> <li><p>数组协变</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> name<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">'动物'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> age<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> dogs<span class="token operator">:</span> Dog<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;teddy&quot;</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// 协变允许 Dog[] 赋值给 Animal[]</span>
<span class="token keyword">let</span> animals<span class="token operator">:</span> Animal<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> dogs<span class="token punctuation">;</span> 
</code></pre></div></li> <li><p>类型断言协变</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 协变允许将 { name: &quot;teddy&quot;, age: 3 } 断言为 Animal</span>
<span class="token keyword">let</span> animal<span class="token operator">:</span> Animal <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;teddy&quot;</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">}</span> <span class="token keyword">as</span> Animal
</code></pre></div></li> <li><p>class协变与禁止协变</p> <ul><li><p>协变</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> name<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">'动物'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> age<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 类型要求返回父类型</span>
<span class="token keyword">type</span> <span class="token class-name">ReturnAnima</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Animal<span class="token punctuation">;</span>
<span class="token comment">// 协变返回了子类型</span>
<span class="token keyword">const</span> getDog<span class="token operator">:</span> <span class="token function-variable function">ReturnAnima</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>禁止协变: 同时有 <code>private</code>、<code>protected</code> 相同标识符;当类中存在类型标识符，则该类就不依赖鸭子类型你继承，没有兼容性。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> id<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">'DNA'</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> name<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">'动物'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> id<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">'DNA'</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> age<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">ReturnAnima</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Animal<span class="token punctuation">;</span>

<span class="token keyword">const</span> getDog<span class="token operator">:</span> <span class="token function-variable function">ReturnAnima</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 报错:同时有 private id 相同标识符,没有兼容性。</span>
</code></pre></div></li></ul></li></ul> <h3 id="类型推断与类型守卫"><a href="#类型推断与类型守卫" class="header-anchor">#</a> 类型推断与类型守卫</h3> <ul><li>类型推断:TypeScript 根据变量的赋值自动确定其类型的过程。如果开发者没有显式指定类型，则会尝试根据赋值的值来推断变量的类型。</li> <li>类型守卫: TypeScript 通过一些检查来细化变量的类型，从而让 TypeScript 能够进行更精确的类型推断。</li></ul> <h4 id="类型推断"><a href="#类型推断" class="header-anchor">#</a> 类型推断</h4> <ul><li><p>变量赋值推断</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 1) </span>
<span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment">// TypeScript 推断 x 的类型为 number</span>
</code></pre></div></li> <li><p>函数返回值推断</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">getUserName</span><span class="token punctuation">(</span>userId<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>userId <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;Alice&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;Bob&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> r <span class="token operator">=</span> <span class="token function">getUserName</span><span class="token punctuation">(</span><span class="token number">888</span><span class="token punctuation">)</span> <span class="token comment">// TypeScript 推断返回类型为 string</span>
</code></pre></div></li> <li><p>上下文推断</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 1) 从右往左</span>
<span class="token keyword">const</span> names <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;Alice&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Bob&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Charlie&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// TypeScript 推断 names 为 string[]</span>
names<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>name <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// name 被推断为 string</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 2) 从左往右</span>
<span class="token keyword">type</span> <span class="token class-name">GetUser</span> <span class="token operator">=</span> <span class="token punctuation">(</span>id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> object
<span class="token keyword">const</span> getUserInfor<span class="token operator">:</span> <span class="token function-variable function">GetUser</span> <span class="token operator">=</span> <span class="token punctuation">(</span>id<span class="token punctuation">,</span> name<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> id<span class="token punctuation">,</span> name <span class="token punctuation">}</span>  <span class="token comment">// id被推断为number , name被推断为string</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>泛型委托推断</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">callback</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">F</span><span class="token punctuation">,</span> <span class="token constant">S</span><span class="token punctuation">,</span> <span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>f<span class="token operator">:</span> <span class="token constant">F</span><span class="token punctuation">,</span> s<span class="token operator">:</span> <span class="token constant">S</span><span class="token punctuation">,</span> t<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> <span class="token function-variable function">cb</span><span class="token operator">:</span> <span class="token punctuation">(</span>first<span class="token operator">:</span> <span class="token constant">F</span><span class="token punctuation">,</span> second<span class="token operator">:</span> <span class="token constant">S</span><span class="token punctuation">,</span> third<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token function">callback</span><span class="token punctuation">(</span><span class="token string">'str'</span><span class="token punctuation">,</span> <span class="token number">123</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>f<span class="token punctuation">,</span> s<span class="token punctuation">,</span> t<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// (parameter) f: string</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// (parameter) s: number</span>
	<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// (parameter) t: boolean</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></li></ul> <h4 id="类型守卫"><a href="#类型守卫" class="header-anchor">#</a> 类型守卫</h4> <p>通过 <code>typeof</code> 、<code>instanceof</code>、 <code>in</code> <code>is</code> 等来确定变量的类型。这样处理联合类型或在类型不明确的情况下就可以更好的由TypeScript 推断类型。</p> <ul><li><p>type守卫</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">Guards</span><span class="token punctuation">(</span>UnionTypes<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> UnionTypes <span class="token operator">===</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>UnionTypes<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// UnionTypes 被推断为 string</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>UnionTypes<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// UnionTypes 被推断为 boolean</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>instanceof守卫</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">getCall</span><span class="token punctuation">(</span>classInstance<span class="token operator">:</span> Person <span class="token operator">|</span> Dog<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>classInstance <span class="token keyword">instanceof</span> <span class="token class-name">Person</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        classInstance<span class="token punctuation">.</span><span class="token function">talk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 被推断为 Person 有 talk</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
       classInstance<span class="token punctuation">.</span><span class="token function">barking</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 被推断为 Dog 有 barking</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>in守卫</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Fish</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token function-variable function">swim</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">Bird</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token function-variable function">fly</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">Pet</span> <span class="token operator">=</span> Fish <span class="token operator">|</span> Bird<span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">move</span><span class="token punctuation">(</span>pet<span class="token operator">:</span> Pet<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">&quot;swim&quot;</span> <span class="token keyword">in</span> pet<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    pet<span class="token punctuation">.</span><span class="token function">swim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// pet 被推断为 Fish 类型</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    pet<span class="token punctuation">.</span><span class="token function">fly</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// pet 被推断为 Bird 类型</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p><code>is</code>类型谓词: TypeScript 自定义类型守卫</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">isString</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token operator">:</span> value <span class="token keyword">is</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">typeof</span> value <span class="token operator">===</span> <span class="token string">'string'</span><span class="token punctuation">;</span> <span class="token comment">// 必须返回boolean值，配合is ，定义断言类型守卫</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">printValue</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isString</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">String: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// value 被推断为 string 类型</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Number: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// value 被推断为 number 类型</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul> <h3 id="模块化与配置"><a href="#模块化与配置" class="header-anchor">#</a> 模块化与配置</h3> <p>TypeScript 支持多种模块化系统，这使得开发者可以根据项目需求和个人偏好选择最适合的模块化方案。以下是 TypeScript 支持的一些主要模块化系统：</p> <ul><li><strong>ES6 Modules</strong>: TypeScript 支持 ES6 模块系统，它使用 <code>import</code> 和 <code>export</code> 关键字来导入和导出模块。</li> <li><strong>CommonJS</strong>: 这是 Node.js 使用的模块系统。在这种系统中，模块通过 <code>require</code> 函数进行导入，并通过 <code>module.exports</code> 导出。</li> <li><strong>AMD (Asynchronous Module Definition)</strong>: AMD 是一种异步模块加载系统，它允许模块在运行时被加载。这在需要异步加载模块的浏览器环境中非常有用。</li> <li><strong>UMD (Universal Module Definition)</strong>: 这种模块系统旨在兼容多种模块加载器，包括 CommonJS 和 AMD。它允许开发者编写可以在不同环境中运行的代码。</li> <li><strong>SystemJS</strong>: 这是一个动态模块加载器，它支持 ES6 模块以及其他模块格式。</li></ul> <p>在 TypeScript 中，你可以通过配置 <code>tsconfig.json</code> 文件中的 <code>module</code> 选项来指定你想要使用的模块系统。例如：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;module&quot;</span><span class="token operator">:</span> <span class="token string">&quot;es6&quot;</span> <span class="token comment">// &quot;commonjs&quot;,&quot;es6&quot;, &quot;esnext&quot;,&quot;amd&quot;, &quot;umd&quot;, &quot;system&quot;, &quot;none&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="es6-modules"><a href="#es6-modules" class="header-anchor">#</a> ES6 Modules</h4> <p>ES6 模块是现代 JavaScript 的标准模块系统。在 TypeScript 中，默认就是使用 ES6 模块。</p> <p><strong>导入模块</strong>:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 导入整个模块</span>
<span class="token keyword">import</span> <span class="token keyword">module</span> <span class="token keyword">from</span> <span class="token string">'module-name'</span><span class="token punctuation">;</span>

<span class="token comment">// 导入模块中的特定部分</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> exportName <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'module-name'</span><span class="token punctuation">;</span>

<span class="token comment">// 重命名导入</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> exportName <span class="token keyword">as</span> localName <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'module-name'</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>导出模块</strong>:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 导出单个变量或函数</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> exportName <span class="token operator">=</span> exportValue<span class="token punctuation">;</span>

<span class="token comment">// 导出多个</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> exportName1 <span class="token operator">=</span> exportValue1<span class="token punctuation">,</span> exportName2 <span class="token operator">=</span> exportValue2<span class="token punctuation">;</span>

<span class="token comment">// 导出模块</span>
<span class="token keyword">export</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token string">'module-name'</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="commonjs模块"><a href="#commonjs模块" class="header-anchor">#</a> CommonJS模块</h4> <p>CommonJS 是 Node.js 的模块系统。在 TypeScript 中使用 CommonJS 模块，你需要在 <code>tsconfig.json</code> 中设置 <code>module</code> 为 <code>&quot;commonjs&quot;</code>。</p> <p><strong>导入模块</strong>:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 导入整个模块</span>
<span class="token keyword">const</span> module <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">'module-name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 导入模块中的特定部分</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> exportName <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">'module-name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>导出模块</strong>:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 导出单个变量或函数</span>
exports<span class="token punctuation">.</span>exportName <span class="token operator">=</span> exportValue<span class="token punctuation">;</span>

<span class="token comment">// 或者导出多个</span>
exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  exportName1<span class="token operator">:</span> exportValue1<span class="token punctuation">,</span>
  exportName2<span class="token operator">:</span> exportValue2
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 或者使用 module.exports</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  exportName1<span class="token operator">:</span> exportValue1<span class="token punctuation">,</span>
  exportName2<span class="token operator">:</span> exportValue2
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="amd-模块"><a href="#amd-模块" class="header-anchor">#</a> AMD 模块</h4> <p>AMD 是一种用于浏览器的模块化规范，通常与 RequireJS 一起使用。TypeScript 也支持这种模块化规范。</p> <p><strong>导入模块</strong>:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token function">define</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'require'</span><span class="token punctuation">,</span> <span class="token string">'exports'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token keyword">require</span><span class="token punctuation">,</span> exports<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  exports<span class="token punctuation">.</span>myVar <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span>
  <span class="token keyword">function</span> <span class="token function">myFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Hello, World!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  exports<span class="token punctuation">.</span>myFunction <span class="token operator">=</span> myFunction<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>导出模块</strong>:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">require</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'./myModule'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>myModule<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  myModule<span class="token punctuation">.</span><span class="token function">myFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Hello, World!</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="umd-模块"><a href="#umd-模块" class="header-anchor">#</a> UMD 模块</h4> <p>UMD 是一种同时支持 AMD 和 CommonJS 的模块化规范，旨在创建可以在浏览器和 Node.js 环境中运行的模块。TypeScript 支持 UMD 模块。</p> <ul><li>导入模块（UMD 允许在 AMD, CommonJS 和全局变量三种环境下使用）</li> <li>AMD, CommonJS模块直接不兼容</li></ul> <p><strong>导入模块</strong>:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> myVar <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">'module-name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>导出模块</strong>:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 导出模块</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> myVar <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">myFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Hello, World!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="systemjs模块"><a href="#systemjs模块" class="header-anchor">#</a> SystemJS模块</h4> <p>SystemJS 是一个动态模块加载器，支持 ES6 模块、AMD、CommonJS 等多种模块格式。</p> <p><strong>导入模块</strong>:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// SystemJS 加载模块</span>
System<span class="token punctuation">.</span><span class="token function">import</span><span class="token punctuation">(</span><span class="token string">'./myModule'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>myModule<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  myModule<span class="token punctuation">.</span><span class="token function">myFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Hello, World!</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>导出模块</strong>:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 导出模块</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> myVar <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">myFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Hello, World!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="内部模块"><a href="#内部模块" class="header-anchor">#</a> 内部模块</h4> <h5 id="命名空间-namespaces"><a href="#命名空间-namespaces" class="header-anchor">#</a> 命名空间（Namespaces）</h5> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 定义</span>
<span class="token keyword">namespace</span> MyNamespace <span class="token punctuation">{</span>
    <span class="token keyword">function</span> <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Hello from MyNamespace!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">class</span> <span class="token class-name">Greeter</span> <span class="token punctuation">{</span>
        <span class="token function">sayGoodbye</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Goodbye from MyNamespace!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 使用</span>
MyNamespace<span class="token punctuation">.</span><span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 调用命名空间中的函数</span>
<span class="token keyword">let</span> greeter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyNamespace</span><span class="token punctuation">.</span><span class="token function">Greeter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
greeter<span class="token punctuation">.</span><span class="token function">sayGoodbye</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 使用命名空间中的类</span>
</code></pre></div><h5 id="合并命名空间"><a href="#合并命名空间" class="header-anchor">#</a> 合并命名空间</h5> <p><strong>file1.ts</strong></p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">namespace</span> MyNamespace <span class="token punctuation">{</span>
    <span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>file2.ts</strong></p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">namespace</span> MyNamespace <span class="token punctuation">{</span>
    <span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'bar'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>其他文件中导入</strong></p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> MyNamespace <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./path-to-file'</span><span class="token punctuation">;</span>
MyNamespace<span class="token punctuation">.</span><span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="别名"><a href="#别名" class="header-anchor">#</a> 别名</h5> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 当命名空间名称过长时，可以使用别名简化访问：</span>
<span class="token keyword">namespace</span> LongNamespaceName <span class="token punctuation">{</span>
    <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">SomeClass</span> <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token function">doWork</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Working in SomeClass&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">import</span> <span class="token constant">LNN</span> <span class="token operator">=</span> LongNamespaceName<span class="token punctuation">;</span>

<span class="token constant">LNN</span><span class="token punctuation">.</span>SomeClass<span class="token punctuation">.</span><span class="token function">doWork</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="命名空间的嵌套"><a href="#命名空间的嵌套" class="header-anchor">#</a> 命名空间的嵌套</h5> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">namespace</span> OuterNamespace <span class="token punctuation">{</span>
    <span class="token keyword">export</span> <span class="token keyword">namespace</span> InnerNamespace <span class="token punctuation">{</span>
        <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">InnerClass</span> <span class="token punctuation">{</span>
            <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token function">greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Hello from InnerNamespace&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

OuterNamespace<span class="token punctuation">.</span>InnerNamespace<span class="token punctuation">.</span>InnerClass<span class="token punctuation">.</span><span class="token function">greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="三斜线指令"><a href="#三斜线指令" class="header-anchor">#</a> 三斜线指令</h5> <p>它们通常用于引用其他文件、声明路径或者定义全局类型信息。三斜线指令总是位于文件的最顶端，仅在注释中有效。常见的三斜线指令包括</p> <ul><li><p>三斜线指令必须出现在文件的最顶端，在任何非三斜线指令之前。用于在编译过程中提供额外的信息。</p></li> <li><p>使用 <code>/// &lt;reference path=&quot;...&quot; /&gt;</code> 三斜线指令来引用其他文件。在编译时，可以将这些文件一起编译。以确保编译器正确地解析依赖关系。</p></li> <li><p>在现代 TypeScript 项目中，使用三斜线指令的需求已减少，因为 TypeScript 支持基于模块的构建系统，如 Webpack、Rollup 等，能够自动处理文件依赖。</p></li> <li><p>当使用模块系统（如 ES 模块或 CommonJS）时，通常不需要使用 <code>/// &lt;reference path=&quot;...&quot; /&gt;</code>，而是使用模块导入语句 (<code>import</code>/<code>export</code>) 来管理依赖关系。</p></li> <li><p><strong>用法1：</strong> 用于引用其他 TypeScript 文件。这种指令在多文件项目中非常有用，可以确保编译器知道这些文件之间的依赖关系。</p></li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">/// &lt;reference path=&quot;file1.ts&quot; /&gt;</span>
<span class="token keyword">namespace</span> MyNamespace <span class="token punctuation">{</span>
    <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">ClassTwo</span> <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token function">methodTwo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Method Two from ClassTwo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>**用法2：**用于声明对类型定义文件的依赖。这种指令通常用于引入从 <code>@types</code> 包中获取的类型定义文件，如 <code>@types/jquery</code> 或 <code>@types/node</code>。</li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">/// &lt;reference types=&quot;jquery&quot; /&gt;</span>
<span class="token function">$</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ready</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Document is ready&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><strong>用法3：</strong> 用于告诉编译器不要包含默认的库文件。编写自定义的运行时库，或者在一些非常特殊的环境中，避免加载默认的 TypeScript 标准库。</li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">/// &lt;reference no-default-lib=&quot;true&quot;/&gt;</span>
</code></pre></div><h4 id="声明文件"><a href="#声明文件" class="header-anchor">#</a> 声明文件</h4> <ul><li>声明文件的主要作用是提供类型定义，这些类型定义描述了库的结构和 API，使得 TypeScript 编译器可以进行类型检查和代码补全。</li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// index.d.ts</span>
<span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">greet</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>  <span class="token comment">// declare 关键字用于告诉 TypeScript 这是一个外部函数</span>
</code></pre></div><ul><li>TypeScript 社区在 DefinitelyTyped 上维护了大量的声明文件。这些声明文件可以通过 <code>@types</code> 作用域安装，例如：</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> @types/jquery --save-dev
</code></pre></div><ul><li>不同类型的声明文件和引用指令在项目中的作用范围和优先级有所不同。下面是TypeScript 查找声明文件的顺序通常如下简单总结:
<ol><li><strong>从<code>tsconfig.json</code>配置的<code>include</code>字段开始查找</strong>：TypeScript编译器会根据<code>tsconfig.json</code>文件中<code>include</code>字段指定的路径来查找声明文件。</li> <li><strong>查找项目中的<code>.d.ts</code>文件</strong>：编译器会在项目目录中搜索以<code>.d.ts</code>为后缀的文件，并使用这些文件中的类型声明。</li> <li><strong>使用<code>@types</code>包</strong>：对于第三方库，通常通过npm安装相应的<code>@types</code>包来提供类型声明。例如，安装<code>@types/jquery</code>来为jQuery库提供类型声明。</li> <li><strong>三斜线指令</strong>：虽然在<code>.ts</code>文件中不再推荐使用，但在<code>.d.ts</code>文件中，三斜线指令（如<code>/// &lt;reference path=&quot;...&quot;/&gt;</code>）仍然用于显式地包含其他声明文件。</li> <li><strong>全局类声明文件</strong>：如果一个声明文件的顶层作用域中没有<code>import</code>和<code>export</code>，那么这个声明文件被视为全局类声明文件，其声明会在全局生效。</li> <li><strong>模块类声明文件</strong>：如果声明文件的顶层作用域中有<code>import</code>或<code>export</code>，那么这个声明文件被视为模块类声明文件，其声明不会在全局生效，需要按照模块的方式导入才能使用。</li> <li><strong>声明合并</strong>：TypeScript允许通过声明合并来扩展现有的类型声明，例如，可以通过扩展接口来为现有类型添加新的属性或方法。</li> <li><strong>使用<code>declare module</code>扩展模块</strong>：可以使用<code>declare module 'module-name'</code>来为现有的模块添加额外的类型声明，这通常用于为没有类型声明的第三方库提供类型信息。</li> <li><strong><code>node_modules/@types</code>目录</strong>：TypeScript编译器会特别处理<code>node_modules/@types</code>目录下的包，每个包被视为一个模块，并且会寻找入口文件（通常是<code>index.d.ts</code>）以及通过三斜线指令或<code>import</code>引入的其他声明文件。</li></ol></li></ul> <h4 id="配置"><a href="#配置" class="header-anchor">#</a> 配置</h4> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">/* 访问 https://aka.ms/tsconfig 以了解更多关于此文件的信息 */</span>

        <span class="token comment">/* 项目 */</span>
        <span class="token comment">// &quot;incremental&quot;: true,                              /* 保存 .tsbuildinfo 文件以允许项目的增量编译。 */</span>
        <span class="token comment">// &quot;composite&quot;: true,                                /* 启用约束，允许 TypeScript 项目与项目引用一起使用。 */</span>
        <span class="token comment">// &quot;tsBuildInfoFile&quot;: &quot;./.tsbuildinfo&quot;,              /* 指定 .tsbuildinfo 增量编译文件的路径。 */</span>
        <span class="token comment">// &quot;disableSourceOfProjectReferenceRedirect&quot;: true,  /* 禁用在引用复合项目时优先使用源文件而不是声明文件。 */</span>
        <span class="token comment">// &quot;disableSolutionSearching&quot;: true,                 /* 在编辑时，将项目排除在多项目引用检查之外。 */</span>
        <span class="token comment">// &quot;disableReferencedProjectLoad&quot;: true,             /* 减少 TypeScript 自动加载的项目数量。 */</span>

        <span class="token comment">/* 语言和环境 */</span>
        <span class="token property">&quot;target&quot;</span><span class="token operator">:</span> <span class="token string">&quot;es2016&quot;</span><span class="token punctuation">,</span>                                  <span class="token comment">/* 设置发出的 JavaScript 的语言版本，并包含兼容的库声明。 */</span>
        <span class="token comment">// &quot;lib&quot;: [],                                        /* 指定一组捆绑的库声明文件，这些文件描述目标运行时环境。 */</span>
        <span class="token comment">// &quot;jsx&quot;: &quot;preserve&quot;,                                /* 指定生成的 JSX 代码。 */</span>
        <span class="token property">&quot;experimentalDecorators&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>                      <span class="token comment">/* 启用对旧版实验性装饰器的实验性支持。 */</span>
        <span class="token comment">// &quot;emitDecoratorMetadata&quot;: true,                    /* 为源文件中装饰的声明发出设计类型元数据。 */</span>
        <span class="token comment">// &quot;jsxFactory&quot;: &quot;&quot;,                                 /* 指定在目标为 React JSX 发射时使用的 JSX 工厂函数，例如 'React.createElement' 或 'h'。 */</span>
        <span class="token comment">// &quot;jsxFragmentFactory&quot;: &quot;&quot;,                         /* 指定在目标为 React JSX 发射时用于片段的 JSX 片段引用，例如 'React.Fragment' 或 'Fragment'。 */</span>
        <span class="token comment">// &quot;jsxImportSource&quot;: &quot;&quot;,                            /* 指定使用 'jsx: react-jsx*' 时用于导入 JSX 工厂函数的模块说明符。 */</span>
        <span class="token comment">// &quot;reactNamespace&quot;: &quot;&quot;,                             /* 指定为 'createElement' 调用的对象。这仅适用于目标为 'react' JSX 发射。 */</span>
        <span class="token comment">// &quot;noLib&quot;: true,                                    /* 禁用包含任何库文件，包括默认的 lib.d.ts。 */</span>
        <span class="token comment">// &quot;useDefineForClassFields&quot;: true,                  /* 发出符合 ECMAScript 标准的类字段。 */</span>
        <span class="token comment">// &quot;moduleDetection&quot;: &quot;auto&quot;,                        /* 控制用于检测模块格式 JS 文件的方法。 */</span>

        <span class="token comment">/* 模块 */</span>
        <span class="token property">&quot;module&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ESNext&quot;</span><span class="token punctuation">,</span>                                  <span class="token comment">/* 指定生成的模块代码。 */</span>
        <span class="token comment">// &quot;rootDir&quot;: &quot;./&quot;,                                  /* 指定源文件所在的根文件夹。 */</span>
        <span class="token comment">// &quot;moduleResolution&quot;: &quot;node10&quot;,                     /* 指定 TypeScript 如何从给定的模块说明符中查找文件。 */</span>
        <span class="token comment">// &quot;baseUrl&quot;: &quot;./&quot;,                                  /* 指定解析非相对模块名称的基本目录。 */</span>
        <span class="token comment">// &quot;paths&quot;: {},                                      /* 指定将导入重新映射到其他查找位置的一组条目。 */</span>
        <span class="token comment">// &quot;rootDirs&quot;: [],                                   /* 允许将多个文件夹视为一个文件夹来解析模块。 */</span>
        <span class="token comment">// &quot;typeRoots&quot;: [],                                  /* 指定充当 './node_modules/@types' 的多个文件夹。 */</span>
        <span class="token comment">// &quot;types&quot;: [],                                      /* 指定在不在源文件中引用的情况下包含的类型包名称。 */</span>
        <span class="token comment">// &quot;allowUmdGlobalAccess&quot;: true,                     /* 允许从模块访问 UMD 全局变量。 */</span>
        <span class="token comment">// &quot;moduleSuffixes&quot;: [],                             /* 在解析模块时搜索的文件名后缀列表。 */</span>
        <span class="token comment">// &quot;allowImportingTsExtensions&quot;: true,               /* 允许导入包含 TypeScript 文件扩展名的文件。需要设置 '--moduleResolution bundler' 和 '--noEmit' 或 '--emitDeclarationOnly'。 */</span>
        <span class="token comment">// &quot;resolvePackageJsonExports&quot;: true,                /* 在解析包导入时使用 package.json 的 'exports' 字段。 */</span>
        <span class="token comment">// &quot;resolvePackageJsonImports&quot;: true,                /* 在解析导入时使用 package.json 的 'imports' 字段。 */</span>
        <span class="token comment">// &quot;customConditions&quot;: [],                           /* 在解析导入时，除解析器特定的默认值之外设置的条件。 */</span>
        <span class="token comment">// &quot;resolveJsonModule&quot;: true,                        /* 启用导入 .json 文件。 */</span>
        <span class="token comment">// &quot;allowArbitraryExtensions&quot;: true,                 /* 启用导入具有任意扩展名的文件，前提是存在声明文件。 */</span>
        <span class="token comment">// &quot;noResolve&quot;: true,                                /* 禁止通过 'import'、'require' 或 '&lt;reference&gt;' 扩展 TypeScript 应添加到项目中的文件数量。 */</span>

        <span class="token comment">/* JavaScript 支持 */</span>
        <span class="token comment">// &quot;allowJs&quot;: true,                                  /* 允许 JavaScript 文件成为程序的一部分。使用 'checkJS' 选项从这些文件中获取错误。 */</span>
        <span class="token comment">// &quot;checkJs&quot;: true,                                  /* 启用类型检查的 JavaScript 文件中的错误报告。 */</span>
        <span class="token comment">// &quot;maxNodeModuleJsDepth&quot;: 1,                        /* 指定从 'node_modules' 中检查 JavaScript 文件的最大文件夹深度。仅在 'allowJs' 时适用。 */</span>

        <span class="token comment">/* 发射 */</span>
        <span class="token comment">// &quot;declaration&quot;: true,                              /* 从项目中的 TypeScript 和 JavaScript 文件生成 .d.ts 文件。 */</span>
        <span class="token comment">// &quot;declarationMap&quot;: true,                           /* 为 d.ts 文件创建源映射。 */</span>
        <span class="token comment">// &quot;emitDeclarationOnly&quot;: true,                      /* 仅输出 .d.ts 文件而不是 JavaScript 文件。 */</span>
        <span class="token property">&quot;sourceMap&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>                                <span class="token comment">/* 为发出的 JavaScript 文件创建源映射文件。 */</span>
        <span class="token comment">// &quot;inlineSourceMap&quot;: true,                          /* 将源映射文件包含在发出的 JavaScript 中。 */</span>
        <span class="token comment">// &quot;outFile&quot;: &quot;./&quot;,                                  /* 指定将所有输出捆绑到一个 JavaScript 文件中的文件。如果 'declaration' 为 true，还指定将所有 .d.ts 输出捆绑到一个文件中的文件。 */</span>
        <span class="token comment">// &quot;outDir&quot;: &quot;./&quot;,                                   /* 指定所有发出文件的输出文件夹。 */</span>
        <span class="token comment">// &quot;removeComments&quot;: true,                           /* 禁用发出注释。 */</span>
        <span class="token comment">// &quot;noEmit&quot;: true,                                   /* 禁用从编译中发出文件。 */</span>
        <span class="token comment">// &quot;importHelpers&quot;: true,                            /* 允许从 tslib 中导入辅助函数，每个项目一次，而不是每个文件都包含它们。 */</span>
        <span class="token comment">// &quot;importsNotUsedAsValues&quot;: &quot;remove&quot;,               /* 指定仅用于类型的导入的发出/检查行为。 */</span>
        <span class="token comment">// &quot;downlevelIteration&quot;: true,                       /* 为迭代发出更符合规范的，但冗长且性能较差的 JavaScript。 */</span>
        <span class="token comment">// &quot;sourceRoot&quot;: &quot;&quot;,                                 /* 指定调试器查找引用源代码的根路径。 */</span>
        <span class="token comment">// &quot;mapRoot&quot;: &quot;&quot;,                                    /* 指定调试器定位映射文件的位置，而不是生成的位置。 */</span>
        <span class="token comment">// &quot;inlineSources&quot;: true,                            /* 将源代码包含在发出的 JavaScript 的源映射中。 */</span>
        <span class="token comment">// &quot;emitBOM&quot;: true,                                  /* 在输出文件的开头发出 UTF-8 字节顺序标记 (BOM)。 */</span>
        <span class="token comment">// &quot;newLine&quot;: &quot;crlf&quot;,                                /* 设置发出文件的换行符。 */</span>
        <span class="token comment">// &quot;stripInternal&quot;: true,                            /* 禁用发出在 JSDoc 注释中有 '@internal' 的声明。 */</span>
        <span class="token comment">// &quot;noEmitHelpers&quot;: true,                            /* 禁用在编译输出中生成自定义辅助函数（如 '__extends'）。 */</span>
        <span class="token comment">// &quot;noEmitOnError&quot;: true,                            /* 如果报告了任何类型检查错误，则禁用发出文件。 */</span>
        <span class="token comment">// &quot;preserveConstEnums&quot;: true,                       /* 禁用在生成的代码中擦除 'const enum' 声明。 */</span>
        <span class="token comment">// &quot;declarationDir&quot;: &quot;./&quot;,                           /* 指定生成的声明文件的输出目录。 */</span>
        <span class="token comment">// &quot;preserveValueImports&quot;: true,                     /* 在 JavaScript 输出中保留未使用的导入值，否则会被删除。 */</span>

        <span class="token comment">/* 互操作约束 */</span>
        <span class="token comment">// &quot;isolatedModules&quot;: true,                          /* 确保每个文件可以安全地单独转译，而不依赖于其他导入。 */</span>
        <span class="token comment">// &quot;verbatimModuleSyntax&quot;: true,                     /* 不转换或省略未标记为仅类型的任何导入或导出，确保它们按 'module' 设置的格式写入输出文件。 */</span>
        <span class="token comment">// &quot;allowSyntheticDefaultImports&quot;: true,             /* 当模块没有默认导出时，允许 'import x from y'。 */</span>
        <span class="token property">&quot;esModuleInterop&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>                             <span class="token comment">/* 发出额外的 JavaScript，以简化导入 CommonJS 模块的支持。这启用 'allowSyntheticDefaultImports' 以实现类型兼容性。 */</span>
        <span class="token comment">// &quot;preserveSymlinks&quot;: true,                         /* 禁用解析符号链接到它们的真实路径。这与 node 中的同名标志相关。 */</span>
        <span class="token property">&quot;forceConsistentCasingInFileNames&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>            <span class="token comment">/* 确保导入中的大小写正确。 */</span>

        <span class="token comment">/* 类型检查 */</span>
        <span class="token property">&quot;strict&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>                                      <span class="token comment">/* 启用所有严格的类型检查选项。
      // &quot;noImplicitAny&quot;: true,                            /* 启用对具有隐含 'any' 类型的表达式和声明的错误报告。 */</span>
        <span class="token comment">// &quot;strictNullChecks&quot;: true,                         /* 进行类型检查时，考虑 'null' 和 'undefined'。 */</span>
        <span class="token comment">// &quot;strictFunctionTypes&quot;: true,                      /* 在分配函数时，检查参数和返回值是否类型兼容。 */</span>
        <span class="token comment">// &quot;strictBindCallApply&quot;: true,                      /* 检查 'bind'、'call' 和 'apply' 方法的参数是否匹配原始函数。 */</span>
        <span class="token comment">// &quot;strictPropertyInitialization&quot;: true,             /* 检查在构造函数中未设置的类属性。 */</span>
        <span class="token comment">// &quot;noImplicitThis&quot;: true,                           /* 启用当 'this' 被赋予 'any' 类型时的错误报告。 */</span>
        <span class="token comment">// &quot;useUnknownInCatchVariables&quot;: true,               /* 默认将 catch 子句变量设为 'unknown' 而不是 'any'。 */</span>
        <span class="token comment">// &quot;alwaysStrict&quot;: true,                             /* 确保始终发出 'use strict'。 */</span>
        <span class="token comment">// &quot;noUnusedLocals&quot;: true,                           /* 启用对未读取的局部变量的错误报告。 */</span>
        <span class="token comment">// &quot;noUnusedParameters&quot;: true,                       /* 启用对未读取的函数参数的错误报告。 */</span>
        <span class="token comment">// &quot;exactOptionalPropertyTypes&quot;: true,               /* 按照编写的方式解释可选属性类型，而不是添加 'undefined'。 */</span>
        <span class="token comment">// &quot;noImplicitReturns&quot;: true,                        /* 启用对未在函数中明确返回的代码路径的错误报告。 */</span>
        <span class="token comment">// &quot;noFallthroughCasesInSwitch&quot;: true,               /* 启用对 switch 语句中的 fallthrough 情况的错误报告。 */</span>
        <span class="token comment">// &quot;noUncheckedIndexedAccess&quot;: true,                 /* 在使用索引访问时向类型添加 'undefined'。 */</span>
        <span class="token comment">// &quot;noImplicitOverride&quot;: true,                       /* 确保在派生类中覆盖的成员标记有 override 修饰符。 */</span>
        <span class="token comment">// &quot;noPropertyAccessFromIndexSignature&quot;: true,       /* 强制使用索引访问器访问通过索引类型声明的键。 */</span>
        <span class="token comment">// &quot;allowUnusedLabels&quot;: true,                        /* 禁用对未使用的标签的错误报告。 */</span>
        <span class="token comment">// &quot;allowUnreachableCode&quot;: true,                     /* 禁用对不可达代码的错误报告。 */</span>

        <span class="token comment">/* 完整性 */</span>
        <span class="token comment">// &quot;skipDefaultLibCheck&quot;: true,                      /* 跳过对 TypeScript 包含的 .d.ts 文件的类型检查。 */</span>
        <span class="token property">&quot;skipLibCheck&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>                                 <span class="token comment">/* 跳过对所有 .d.ts 文件的类型检查。 */</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="内置类型"><a href="#内置类型" class="header-anchor">#</a> 内置类型</h3> <h4 id="基础工具类型"><a href="#基础工具类型" class="header-anchor">#</a> 基础工具类型</h4> <h5 id="partial-可选属性"><a href="#partial-可选属性" class="header-anchor">#</a> Partial<T> (可选属性)</T></h5> <ul><li><p>将类型 <code>T</code> 的所有属性变为可选。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
    id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name">PartialUser</span> <span class="token operator">=</span> Partial<span class="token operator">&lt;</span>User<span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// { id?: number; name?: string; }</span>
</code></pre></div></li></ul> <h5 id="required-必选属性"><a href="#required-必选属性" class="header-anchor">#</a> Required<T> (必选属性)</T></h5> <ul><li><p>将类型 <code>T</code> 的所有属性变为必选。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
    id<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    name<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name">RequiredUser</span> <span class="token operator">=</span> Required<span class="token operator">&lt;</span>User<span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// { id: number; name: string; }</span>
</code></pre></div></li></ul> <h5 id="readonly-只读属性"><a href="#readonly-只读属性" class="header-anchor">#</a> Readonly<T> (只读属性)</T></h5> <ul><li><p>将类型 <code>T</code> 的所有属性变为只读。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
    id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name">ReadonlyUser</span> <span class="token operator">=</span> Readonly<span class="token operator">&lt;</span>User<span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// { readonly id: number; readonly name: string; }</span>
</code></pre></div></li></ul> <h5 id="parameters-参数类型"><a href="#parameters-参数类型" class="header-anchor">#</a> Parameters<T> (参数类型)</T></h5> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">getUser</span><span class="token punctuation">(</span>id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> id<span class="token punctuation">,</span> name <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name">Params</span> <span class="token operator">=</span> Parameters<span class="token operator">&lt;</span><span class="token keyword">typeof</span> getUser<span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// [number, string]</span>
</code></pre></div><h5 id="returntype-返回类型"><a href="#returntype-返回类型" class="header-anchor">#</a> ReturnType<T> (返回类型)</T></h5> <ul><li><p>获取函数类型 <code>T</code> 的返回类型。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">getUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'John'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token operator">=</span> ReturnType<span class="token operator">&lt;</span><span class="token keyword">typeof</span> getUser<span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// { id: number; name: string; }</span>
</code></pre></div></li></ul> <h5 id="constructorparameters-构造函数类型"><a href="#constructorparameters-构造函数类型" class="header-anchor">#</a> ConstructorParameters<T> (构造函数类型)</T></h5> <ul><li><p>获取构造函数类型 <code>T</code> 的参数类型组成的元组。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token keyword">public</span> id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token keyword">public</span> name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name">Params</span> <span class="token operator">=</span> ConstructorParameters<span class="token operator">&lt;</span><span class="token keyword">typeof</span> User<span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// [number, string]</span>
</code></pre></div></li></ul> <h5 id="instancetype-实例类型"><a href="#instancetype-实例类型" class="header-anchor">#</a> InstanceType<T> (实例类型)</T></h5> <ul><li><p>获取构造函数类型 <code>T</code> 的实例类型。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token keyword">public</span> id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token keyword">public</span> name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name">UserType</span> <span class="token operator">=</span> InstanceType<span class="token operator">&lt;</span><span class="token keyword">typeof</span> User<span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// User</span>
</code></pre></div></li></ul> <h5 id="awaited-解析promise类型"><a href="#awaited-解析promise类型" class="header-anchor">#</a> Awaited<T> (解析Promise类型)</T></h5> <ul><li><p>取一个 Promise 类型 <code>T</code> 的解析类型。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name"><span class="token constant">P</span></span> <span class="token operator">=</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">P2</span></span> <span class="token operator">=</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;&gt;</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">P3</span></span> <span class="token operator">=</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token builtin">boolean</span><span class="token operator">&gt;&gt;&gt;</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token operator">=</span> Awaited<span class="token operator">&lt;</span><span class="token constant">P</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// string</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">A2</span></span> <span class="token operator">=</span> Awaited<span class="token operator">&lt;</span><span class="token constant">P2</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// number</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">A3</span></span> <span class="token operator">=</span> Awaited<span class="token operator">&lt;</span><span class="token constant">P3</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// boolean</span>
</code></pre></div></li></ul> <h5 id="thisparametertype-this类型"><a href="#thisparametertype-this类型" class="header-anchor">#</a> ThisParameterType<T> (this类型)</T></h5> <ul><li><p>获取某个函数类型 <code>T</code> 中 <code>this</code> 的类型。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">MyClass</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name">MyGreetType</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token operator">:</span> MyClass<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>

<span class="token comment">// 使用 ThisParameterType 来获取 greet 方法的 this 参数类型</span>
<span class="token keyword">type</span> <span class="token class-name">GreetThis</span> <span class="token operator">=</span> ThisParameterType<span class="token operator">&lt;</span>MyGreetType<span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// MyClass</span>
</code></pre></div></li></ul> <h5 id="omitthisparameter-移除this类型"><a href="#omitthisparameter-移除this类型" class="header-anchor">#</a> OmitThisParameter<T> (移除this类型)</T></h5> <ul><li><p>用于从函数类型 <code>T</code> 中移除 <code>this</code> 参数。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">FunctionWithThis</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> a<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">FunctionWithoutThis</span> <span class="token operator">=</span> OmitThisParameter<span class="token operator">&lt;</span>FunctionWithThis<span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// (a: number, b: number) =&gt; void</span>
</code></pre></div></li></ul> <h5 id="noinfer-禁止推断类型"><a href="#noinfer-禁止推断类型" class="header-anchor">#</a> NoInfer<T> (禁止推断类型)</T></h5> <ul><li><p>用于阻止 TypeScript 推断函数参数的类型。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">identityWithNoInfer</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>arg<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token operator">:</span> NoInfer<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> arg<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// TypeScript 自行推断出result是 &quot;Hello World&quot;类型; </span>
<span class="token comment">// 但是我们希望 result 的类型是 string，而不是 &quot;Hello World&quot;类型。</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">identityWithNoInfer</span><span class="token punctuation">(</span><span class="token string">&quot;Hello World&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 使用 NoInfer 禁止TypeScript自行推断</span>
</code></pre></div></li></ul> <h5 id="uppercase-字母大写"><a href="#uppercase-字母大写" class="header-anchor">#</a> Uppercase<T> (字母大写)</T></h5> <ul><li><p>用于字符串类型转换为大写。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">UppercaseGreeting</span> <span class="token operator">=</span> Uppercase<span class="token operator">&lt;</span><span class="token string">&quot;hello world&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// &quot;HELLO WORLD&quot;</span>
</code></pre></div></li></ul> <h5 id="lowercase-字母小写"><a href="#lowercase-字母小写" class="header-anchor">#</a> Lowercase<T> (字母小写)</T></h5> <ul><li><p>用于字符串类型转换为小写。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">LowercaseGreeting</span> <span class="token operator">=</span> Lowercase<span class="token operator">&lt;</span><span class="token string">&quot;HELLO WORLD&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// &quot;hello world&quot;</span>
</code></pre></div></li></ul> <h5 id="capitalize-首字母大写"><a href="#capitalize-首字母大写" class="header-anchor">#</a> Capitalize<T> (首字母大写)</T></h5> <ul><li><p>用于字符串类型转换为首字母大写。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">CapitalizedGreeting</span> <span class="token operator">=</span> Capitalize<span class="token operator">&lt;</span><span class="token string">&quot;hello World&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// &quot;Hello world&quot;</span>
</code></pre></div></li></ul> <h5 id="uncapitalize-首字母小写"><a href="#uncapitalize-首字母小写" class="header-anchor">#</a> Uncapitalize<T> (首字母小写)</T></h5> <ul><li><p>用于字符串类型转换为首字母小写。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">UncapitalizedGreeting</span> <span class="token operator">=</span> Uncapitalize<span class="token operator">&lt;</span><span class="token string">&quot;Hello world&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// &quot;hello World&quot;</span>
</code></pre></div></li></ul> <h4 id="集合工具类型"><a href="#集合工具类型" class="header-anchor">#</a> 集合工具类型</h4> <h5 id="extract-t-u-选取类型"><a href="#extract-t-u-选取类型" class="header-anchor">#</a> Extract&lt;T, U&gt; (选取类型)</h5> <ul><li><p>从类型 <code>T</code> 中提取出可分配给类型 <code>U</code> 的属性。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T</span></span> <span class="token operator">=</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">U</span></span> <span class="token operator">=</span> Extract<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// string | number</span>
</code></pre></div></li></ul> <h5 id="extract-t-u-排除类型"><a href="#extract-t-u-排除类型" class="header-anchor">#</a> Extract&lt;T, U&gt; (排除类型)</h5> <ul><li><p>从类型 <code>T</code> 中排除掉可分配给类型 <code>U</code> 的属性。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T</span></span> <span class="token operator">=</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">U</span></span> <span class="token operator">=</span> Exclude<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// boolean</span>
</code></pre></div></li></ul> <h5 id="nonnullable-排空类型"><a href="#nonnullable-排空类型" class="header-anchor">#</a> NonNullable<T> (排空类型)</T></h5> <ul><li><p>从类型 <code>T</code> 中排除 <code>null</code> 和 <code>undefined</code>。</p> <div class="language- extra-class"><pre class="language-text"><code>type T = string | number | null | undefined;
type U = NonNullable&lt;T&gt;; // string | number
</code></pre></div></li></ul> <h4 id="映射工具类型"><a href="#映射工具类型" class="header-anchor">#</a> 映射工具类型</h4> <h5 id="pick-t-k-选取类型"><a href="#pick-t-k-选取类型" class="header-anchor">#</a> Pick&lt;T, K&gt; (选取类型)</h5> <ul><li><p>从类型 <code>T</code> 中挑选部分属性 <code>K</code> 组成新的类型。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
    id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name">UserIdName</span> <span class="token operator">=</span> Pick<span class="token operator">&lt;</span>User<span class="token punctuation">,</span> <span class="token string">'id'</span> <span class="token operator">|</span> <span class="token string">'name'</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// { id: number; name: string; }</span>
</code></pre></div></li></ul> <h5 id="omit-t-k-排除类型"><a href="#omit-t-k-排除类型" class="header-anchor">#</a> Omit&lt;T, K&gt; (排除类型)</h5> <ul><li><p>从类型 <code>T</code> 中剔除部分属性 <code>K</code> 组成新的类型。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
    id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name">UserWithoutAge</span> <span class="token operator">=</span> Omit<span class="token operator">&lt;</span>User<span class="token punctuation">,</span> <span class="token string">'age'</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// { id: number; name: string; }</span>
</code></pre></div></li></ul> <h5 id="record-k-t-构造类型"><a href="#record-k-t-构造类型" class="header-anchor">#</a> Record&lt;K, T&gt; (构造类型)</h5> <ul><li><p>构造一个对象类型，其属性键为 <code>K</code>，属性值为 <code>T</code>。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Role</span> <span class="token operator">=</span> <span class="token string">'admin'</span> <span class="token operator">|</span> <span class="token string">'user'</span> <span class="token operator">|</span> <span class="token string">'guest'</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">UserRoles</span> <span class="token operator">=</span> Record<span class="token operator">&lt;</span>Role<span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// { admin: number; user: number; guest: number; }</span>
</code></pre></div></li></ul> <h3 id="类型体操"><a href="#类型体操" class="header-anchor">#</a> 类型体操</h3> <h3 id="类型练习"><a href="#类型练习" class="header-anchor">#</a> 类型练习</h3></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/jaiden-home/www/edit/master/blog/note/TypeScript.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">5/21/2024, 6:58:02 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/note/" class="prev router-link-active">
        指南
      </a></span> <span class="next"><a href="/note/Interpreter.html">
        解析器(Interpreter)
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.c701c129.js" defer></script><script src="/assets/js/3.971ef2e2.js" defer></script><script src="/assets/js/17.8cd15550.js" defer></script><script src="/assets/js/6.65976e91.js" defer></script>
  </body>
</html>
